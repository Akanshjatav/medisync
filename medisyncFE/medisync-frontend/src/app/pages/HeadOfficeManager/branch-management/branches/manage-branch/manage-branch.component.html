<a class="skip-link" href="#main">Skip to content</a>

<div class="app">
  <!-- Navbar -->
  <header class="navbar" role="banner" aria-label="Navbar">
    <div class="nav-left">
      <button
        class="hamburger"
        id="sidebarToggle"
        type="button"
        aria-label="Toggle sidebar"
        aria-expanded="false"
        aria-controls="sidebar"
      >
        ☰ <span style="font-weight: 900;">Menu</span>
      </button>

      <div class="brand" aria-label="Brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="brand-title">
          <strong>MediSync</strong><br />
        </div>
      </div>
    </div>

    <div class="nav-right" aria-label="Account and status">
      <span class="pill" title="System status">
        <span class="dot" aria-hidden="true"></span>
        Online
      </span>

      <a class="btn ghost" href="../Common Features/login.html">Logout</a>
    </div>
  </header>

  <div class="backdrop" id="backdrop" aria-hidden="true"></div>

  <!-- Main -->
  <main class="main" id="main" tabindex="-1">
    <div class="page-title">
      <div>
        <h2>Add User</h2>
        <span class="hint"><span class="req">*</span> Required fields</span>
      </div>
    </div>

    <!-- Card: Add User -->
    <section class="card" aria-label="Add user form">
      <h3>Add / Update User</h3>

      <form [formGroup]="form" (ngSubmit)="onSubmit($event)" novalidate>

        <!-- Messages -->
        <div *ngIf="errorMessage" style="color:#b00020; margin-bottom:10px;">
          {{ errorMessage }}
        </div>

        <div *ngIf="successMessage" style="color:#0a7a0a; margin-bottom:10px;">
          {{ successMessage }}
        </div>

        <!-- ✅ 2-column grid (your CSS already supports this) -->
        <div class="um-form-fields">

          <!-- Name -->
          <div class="field-wrap">
            <label class="label">Name <span class="req">*</span></label>
            <input class="input" type="text" formControlName="name" placeholder="Enter name" />
            <div class="help" *ngIf="hasError('name','required')">Name is required</div>
            <div class="help" *ngIf="hasError('name','minlength')">Name must be at least 2 characters</div>
          </div>

          <!-- Email -->
          <div class="field-wrap">
            <label class="label">Email <span class="req">*</span></label>
            <input class="input" type="email" formControlName="email" placeholder="Enter email" />
            <div class="help" *ngIf="hasError('email','required')">Email is required</div>
            <div class="help" *ngIf="hasError('email','email')">Enter a valid email</div>
            <div class="help" *ngIf="hasError('email','duplicate')">This email already exists</div>
          </div>

          <!-- Phone -->
          <div class="field-wrap">
            <label class="label">Phone <span class="req">*</span></label>
            <input class="input" type="text" formControlName="phone" placeholder="Enter phone (10-15 digits)" />
            <div class="help" *ngIf="hasError('phone','required')">Phone number is required</div>
            <div class="help" *ngIf="hasError('phone','pattern')">Enter a valid phone number</div>
            <div class="help" *ngIf="hasError('phone','duplicate')">This phone number already exists</div>
          </div>

          <!-- Status -->
          <div class="field-wrap">
            <label class="label">Status <span class="req">*</span></label>
            <select class="select" formControlName="status">
              <option value="Active">Active</option>
              <option value="Inactive">Inactive</option>
            </select>
            <div class="help" *ngIf="hasError('status','required')">Status is required</div>
          </div>

          <!-- Role -->
          <div class="field-wrap">
            <label class="label">Role <span class="req">*</span></label>
            <select class="select" formControlName="roleName">
              <option value="PHARMACIST">Pharmacist</option>
              <option value="MANAGER">Store Manager</option>
            </select>
            <div class="help" *ngIf="hasError('role','required')">Role is required</div>
          </div>

        </div>

        <!-- Actions -->
        <div class="um-actions">
          <!-- ✅ Green submit using your .btn.secondary -->
          <button type="submit" class="btn secondary" [disabled]="isSubmitting">
            {{ isSubmitting ? 'Saving...' : 'Add User' }}
          </button>

          <!-- ✅ Cancel uses your neutral .btn.ghost -->
          <button type="button" class="btn ghost" (click)="onCancel()">
            Cancel
          </button>
        </div>

      </form>
    </section>
  </main>
</div>
