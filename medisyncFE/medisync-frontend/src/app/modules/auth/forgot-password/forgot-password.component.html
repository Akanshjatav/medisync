<div class="auth-page" role="application" aria-label="Forgot Password">
  <a class="skip-link" href="#main">Skip to content</a>

  <main id="main" class="main" role="main" aria-label="Main content">
    <div class="auth-wrap">

      <div class="page-title">
        <div>
          <h2>Forgot password</h2>
          <p>Enter your email and we’ll help you recover access to MediSync.</p>
        </div>

        <div class="top-actions">
          <a routerLink="/login" aria-label="Go back to Sign In">← Back to Sign in</a>
        </div>
      </div>

      <section class="auth-grid" aria-label="Password recovery section">

        <!-- Left: Forgot Password Form -->
        <div class="card">
          <h3>Recover your account</h3>
          <p class="sub">We’ll send an OTP or reset link to your registered email.</p>

          <!-- Offline notice -->
          <div class="notice warn" *ngIf="isOffline" role="status" aria-live="polite">
            <div class="icon">i</div>
            <div>
              <h4>You’re offline</h4>
              <p>Password recovery may fail until connectivity is restored.</p>
            </div>
          </div>

          <form class="auth-form" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
            <div class="action">
              <h4>Email <span class="hint">(required)</span></h4>

              <input
                type="email"
                formControlName="email"
                placeholder="Email (e.g., storem01@gmail.com)"
                autocomplete="email"
                [attr.aria-invalid]="isInvalid('email')"
              />

              <p class="field-error" *ngIf="showFieldError('email')">
                {{ getEmailError() }}
              </p>

              <p class="hint" style="margin: 10px 0 0;">
                We’ll send instructions to this email if it’s registered.
              </p>
            </div>

            <div class="help-row" style="margin-top: 0;">
              <a routerLink="/login">Back to Sign in</a>
            </div>

            <button type="submit" class="btn" [disabled]="isSubmitting" style="width: 100%;">
              {{ isSubmitting ? 'Sending…' : 'Send OTP / Reset link' }}
            </button>

            <button
              type="button"
              class="xbtn"
              (click)="onCancel()"
              [disabled]="isSubmitting"
              style="width: 100%;"
            >
              Cancel
            </button>

            <!-- Success box -->
            <div class="alert success" *ngIf="successMessage" role="status" aria-live="polite">
              {{ successMessage }}
            </div>

            <!-- Error box -->
            <div class="alert" *ngIf="errorMessages.length" role="alert" aria-live="polite">
              <ul>
                <li *ngFor="let msg of errorMessages">{{ msg }}</li>
              </ul>
            </div>
          </form>
        </div>

        <!-- Right: Helpful info -->
        <div class="card">
          <h3>Quick tips</h3>
          <p class="sub">Common recovery issues and quick fixes.</p>

          <div class="notice warn">
            <div class="icon">i</div>
            <div>
              <h4>Didn’t receive an email?</h4>
              <p>Check spam/junk folder and verify you entered the correct email.</p>
            </div>
          </div>

          <div class="notice danger">
            <div class="icon">!</div>
            <div>
              <h4>Security reminder</h4>
              <p>Never share OTPs or reset links with anyone.</p>
            </div>
          </div>
        </div>

      </section>

      <footer>
        <div>© 2025 MediSync</div>
        <div class="footer-links" aria-label="Legal">
          <a href="#" (click)="$event.preventDefault()">Privacy</a>
          <a href="#" (click)="$event.preventDefault()">Terms</a>
          <a href="#" (click)="$event.preventDefault()">Help Center</a>
          <span class="hint">mailto:</span>
          <a href="mailto:somethingmail@mail.com">somethingmail#64gmail.com</a>
        </div>
      </footer>

    </div>
  </main>
</div>
