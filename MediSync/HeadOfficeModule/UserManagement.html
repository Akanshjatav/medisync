 <!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Vendor Portal – User Management</title>



  <style>

    /* =========================

       Reference Brand Palette + UI Tokens

       ========================= */

    :root{

      /* Primary */

      --blue: #337AB7;

      --green: #5CB85C;

      --navy: #10324A;

      --forest: #1F4E2E;

      --black: #111111;

      --gray: #515151;

      --light-gray: #E5E5E5;

      --white: #FFFFFF;

      --very-light-green: #F5FBF7;

      --very-light-blue: #EAF3FA;



      /* Expanded */

      --blue-dark: #285A8E;

      --blue-soft: #6FA8DC;

      --green-dark: #3E8E5A;

      --green-light: #8FD19E;

      --gray-balanced: #A0A0A0;

      --off-white: #FAFAF8;

      --green-wash: #E8F7EE;

      --blue-wash: #D6EAF8;



      /* Accents */

      --amber: #F0AD4E;

      --red: #D9534F;

      --purple: #8E44AD;

      --yellow: #FFCE54;

      --aqua: #5BC0DE;



      /* UI */

      --bg: var(--off-white);

      --surface: var(--white);

      --surface-2: #fcfcfb;

      --text: var(--black);

      --muted: var(--gray);

      --border: rgba(16, 50, 74, 0.14);

      --shadow: 0 8px 24px rgba(17,17,17,.08);

      --shadow-2: 0 10px 30px rgba(16, 50, 74, .10);

      --ring: 0 0 0 4px rgba(51, 122, 183, .25);



      --radius: 16px;

      --radius-sm: 12px;

      --gap: 16px;



      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";

      --sidebar-w: 290px;

      --navbar-h: 72px;

    }



    @media (prefers-color-scheme: dark){

      :root{

        --bg: #0b141b;

        --surface: #0f1e28;

        --surface-2: #10222d;

        --text: #f4f6f8;

        --muted: #c1c7cd;

        --border: rgba(229,229,229,.12);

        --shadow: 0 10px 30px rgba(0,0,0,.45);

        --shadow-2: 0 10px 30px rgba(0,0,0,.5);

      }

    }



    /* =========================

       Base

       ========================= */

    *{ box-sizing: border-box; }

    html,body{ height: 100%; }

    body{

      margin: 0;

      font-family: var(--font);

      color: var(--text);

      background: linear-gradient(180deg, var(--very-light-blue), var(--bg) 45%);

      line-height: 1.4;

    }

    a{ color: var(--blue); text-decoration: none; }

    a:hover{ text-decoration: underline; }



    .skip-link{

      position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;

    }

    .skip-link:focus{

      left:12px; top:12px; width:auto; height:auto; padding:10px 12px;

      border-radius: 12px; background: var(--surface); box-shadow: var(--shadow);

      outline:none; z-index: 9999;

    }



    /* =========================

       App Layout: Navbar + Sidebar + Main

       ========================= */

    .app{

      min-height: 100vh;

      display: grid;

      grid-template-rows: var(--navbar-h) 1fr;

      grid-template-columns: var(--sidebar-w) 1fr;

      grid-template-areas:

        "nav nav"

        "side main";

    }



    /* Navbar */

    .navbar{

      grid-area: nav;

      position: sticky;

      top: 0;

      z-index: 50;



      display: flex;

      align-items: center;

      justify-content: space-between;

      gap: 12px;



      padding: 12px 16px;

      border-bottom: 1px solid var(--border);

      background: rgba(255,255,255,.7);

      backdrop-filter: blur(10px);

    }

    @media (prefers-color-scheme: dark){

      .navbar{ background: rgba(15,30,40,.75); }

    }



    .nav-left, .nav-right{

      display: flex;

      align-items: center;

      gap: 12px;

      min-width: 0;

    }



    .brand{

      display: flex;

      align-items: center;

      gap: 12px;

      min-width: 220px;

    }

    .logo{

      width: 44px;

      height: 44px;

      border-radius: 14px;

      background: conic-gradient(from 200deg, var(--blue), var(--aqua), var(--green));

      box-shadow: var(--shadow-2);

      position: relative;

      flex: 0 0 auto;

    }

    .logo::after{

      content: "";

      position: absolute;

      inset: 10px;

      border-radius: 10px;

      background: rgba(255,255,255,.88);

    }

    .brand-title{

      display: grid;

      gap: 2px;

      min-width: 0;

    }

    .brand-title strong{

      color: var(--navy);

      font-size: 14px;

      letter-spacing: .2px;

    }

    .brand-title small{

      color: var(--muted);

      white-space: nowrap;

      overflow: hidden;

      text-overflow: ellipsis;

    }



    .hamburger{

      display: none;

      border: 1px solid var(--border);

      background: var(--surface);

      color: var(--navy);

      border-radius: 14px;

      padding: 10px 12px;

      cursor: pointer;

      box-shadow: var(--shadow);

      font-weight: 800;

    }

    .hamburger:focus{ outline:none; box-shadow: var(--ring), var(--shadow); }



    /* Search */

    .search{

      display: flex;

      align-items: center;

      gap: 10px;

      flex: 1;

      max-width: 640px;

      min-width: 220px;

    }

    .search input[type="search"]{

      width: 100%;

      padding: 11px 12px;

      border-radius: 14px;

      border: 1px solid var(--border);

      background: var(--surface);

      color: var(--text);

      outline: none;

    }

    .search input[type="search"]:focus{

      box-shadow: var(--ring);

      border-color: rgba(51,122,183,.55);

    }



    .btn{

      border: 0;

      cursor: pointer;

      padding: 11px 12px;

      border-radius: 14px;

      background: var(--blue);

      color: #fff;

      font-weight: 700;

      letter-spacing: .2px;

      box-shadow: var(--shadow);

      transition: transform .08s ease, filter .2s ease;

      white-space: nowrap;

    }

    .btn:hover{ filter: brightness(1.03); }

    .btn:active{ transform: translateY(1px); }

    .btn:focus{ outline: none; box-shadow: var(--ring), var(--shadow); }



    .btn.secondary{ background: var(--green); }

    .btn.secondary:hover{ filter: brightness(1.03); }



    .pill{

      display: inline-flex;

      align-items: center;

      gap: 8px;

      padding: 8px 10px;

      border-radius: 999px;

      border: 1px solid var(--border);

      background: var(--surface);

      color: var(--muted);

      font-size: 12px;

      white-space: nowrap;

    }

    .dot{

      width: 8px;

      height: 8px;

      border-radius: 50%;

      background: var(--green);

      box-shadow: 0 0 0 4px rgba(92,184,92,.18);

    }



    details.menu{ position: relative; }

    details.menu > summary{

      list-style: none;

      cursor: pointer;

      user-select: none;

      padding: 10px 12px;

      border-radius: 14px;

      border: 1px solid var(--border);

      background: var(--surface);

      box-shadow: var(--shadow);

      font-weight: 800;

      color: var(--navy);

      outline: none;

      white-space: nowrap;

    }

    details.menu > summary:focus{ box-shadow: var(--ring), var(--shadow); }

    details.menu > summary::-webkit-details-marker{ display:none; }



    .dropdown{

      position: absolute;

      right: 0;

      top: 52px;

      width: 220px;

      background: var(--surface);

      border: 1px solid var(--border);

      border-radius: 14px;

      box-shadow: var(--shadow-2);

      padding: 10px;

      z-index: 60;

    }

    .dropdown a{

      display: block;

      padding: 10px 10px;

      border-radius: 12px;

      color: var(--text);

      font-weight: 700;

    }

    .dropdown a:hover{

      background: linear-gradient(90deg, rgba(51,122,183,.12), transparent);

      text-decoration: none;

    }



    /* Sidebar */

    .sidebar{

      grid-area: side;

      padding: 16px;

      border-right: 1px solid var(--border);

      background: rgba(245, 251, 247, .65);

      backdrop-filter: blur(8px);

      overflow: auto;

    }

    @media (prefers-color-scheme: dark){

      .sidebar{ background: rgba(15,30,40,.55); }

    }



    .side-card{

      background: var(--surface);

      border: 1px solid var(--border);

      border-radius: var(--radius);

      box-shadow: var(--shadow);

      padding: 14px;

      margin-bottom: 14px;

    }

    .side-title{

      font-size: 12px;

      color: var(--muted);

      margin: 2px 4px 10px;

      text-transform: uppercase;

      letter-spacing: .12em;

    }

    .nav{

      display: grid;

      gap: 8px;

    }

    .nav a{

      display: flex;

      align-items: center;

      justify-content: space-between;

      padding: 10px 12px;

      border-radius: 14px;

      border: 1px solid transparent;

      background: linear-gradient(180deg, var(--surface-2), var(--surface));

      color: var(--navy);

      font-weight: 800;

    }

    .nav a:hover{

      border-color: rgba(51,122,183,.25);

      text-decoration: none;

    }

    .nav a[aria-current="page"]{

      border-color: rgba(51,122,183,.40);

      box-shadow: 0 0 0 4px rgba(51,122,183,.12);

    }

    .badge{

      font-size: 12px;

      padding: 3px 8px;

      border-radius: 999px;

      background: rgba(51,122,183,.12);

      color: var(--blue-dark);

      border: 1px solid rgba(51,122,183,.18);

      font-weight: 900;

      white-space: nowrap;

    }

    .badge.green{ background: rgba(92,184,92,.14); color: var(--green-dark); border-color: rgba(92,184,92,.18); }

    .badge.red{ background: rgba(217,83,79,.18); color: #8b1f1b; border-color: rgba(217,83,79,.22); }



    /* Main */

    .main{

      grid-area: main;

      padding: 16px;

      overflow: auto;

    }



    .page-title{

      display: flex;

      align-items: flex-start;

      justify-content: space-between;

      gap: var(--gap);

      margin-bottom: 14px;

    }

    .page-title h2{

      margin: 0;

      font-size: 22px;

      letter-spacing: .2px;

      color: var(--navy);

    }

    .page-title p{

      margin: 6px 0 0;

      color: var(--muted);

      max-width: 75ch;

    }

    .hint{ color: var(--muted); font-size: 12px; }



    .grid{ display: grid; gap: var(--gap); }



    .card{

      background: var(--surface);

      border: 1px solid var(--border);

      border-radius: var(--radius);

      box-shadow: var(--shadow);

      padding: 14px;

    }

    .card h3{

      margin: 0 0 10px;

      color: var(--navy);

      font-size: 14px;

      letter-spacing: .2px;

    }



    /* =========================

       User Management (page-specific)

       ========================= */

    .um-wrap{ display: grid; gap: var(--gap); }

    .um-row{

      display: grid;

      grid-template-columns: 1fr auto;

      gap: var(--gap);

      align-items: end;

    }

    @media (max-width: 760px){

      .um-row{ grid-template-columns: 1fr; }

    }



    /* Inputs matching reference look */

    .input, .select{

      width: 100%;

      padding: 11px 12px;

      border-radius: 14px;

      border: 1px solid var(--border);

      background: var(--surface);

      color: var(--text);

      outline: none;

      transition: border-color .2s ease, box-shadow .2s ease;

    }

    .input:focus, .select:focus{

      box-shadow: var(--ring);

      border-color: rgba(51,122,183,.55);

    }

    .label{

      display: block;

      margin: 0 0 8px;

      font-weight: 800;

      color: var(--navy);

      font-size: 12px;

      letter-spacing: .08em;

      text-transform: uppercase;

    }



    /* Table (reference friendly) */

    .um-table{

      width: 100%;

      border-collapse: separate;

      border-spacing: 0;

      overflow: hidden;

      border: 1px solid var(--border);

      border-radius: var(--radius);

      background: var(--surface);

    }

    .um-table thead th{

      text-align: left;

      padding: 12px 14px;

      font-size: 12px;

      letter-spacing: .08em;

      text-transform: uppercase;

      color: var(--navy);

      background: linear-gradient(180deg, rgba(214,234,248,.55), transparent);

      border-bottom: 1px solid var(--border);

      white-space: nowrap;

    }

    .um-table tbody td{

      padding: 12px 14px;

      border-bottom: 1px solid rgba(16,50,74,.08);

      vertical-align: middle;

      font-size: 14px;

    }

    .um-table tbody tr:hover{

      background: linear-gradient(90deg, rgba(51,122,183,.08), transparent);

    }

    .um-table tbody tr:last-child td{ border-bottom: 0; }



    .no-results td{

      text-align: center;

      color: var(--muted);

      padding: 14px;

    }



    /* Buttons variants */

    .btn.sm{

      padding: 8px 10px;

      border-radius: 12px;

      font-weight: 900;

      font-size: 13px;

    }

    .btn.ghost{

      background: var(--surface);

      color: var(--navy);

      border: 1px solid var(--border);

      box-shadow: var(--shadow);

    }

    .btn.ghost:hover{

      background: linear-gradient(90deg, rgba(51,122,183,.10), var(--surface));

      filter: none;

    }

    .btn.danger{

      background: transparent;

      color: #8b1f1b;

      border: 1px solid rgba(217,83,79,.35);

      box-shadow: var(--shadow);

    }

    .btn.danger:hover{

      background: rgba(217,83,79,.10);

      filter: none;

    }



    .um-actions{

      display: flex;

      gap: 10px;

      justify-content: flex-end;

      align-items: center;

      flex-wrap: wrap;

    }



    /* Form fields grid */

    .um-form-fields{

      display: grid;

      grid-template-columns: repeat(2, minmax(240px, 1fr));

      gap: var(--gap);

    }

    @media (max-width: 820px){

      .um-form-fields{ grid-template-columns: 1fr; }

    }



    /* Modal */

    #edit-modal{

      position: fixed;

      inset: 0;

      background: rgba(17, 24, 39, 0.40);

      display: none;

      align-items: center;

      justify-content: center;

      z-index: 1000;

      padding: 16px;

    }

    #edit-modal .modal-card{

      width: 560px;

      max-width: 96vw;

      background: var(--surface);

      border: 1px solid var(--border);

      border-radius: var(--radius);

      box-shadow: var(--shadow-2);

      padding: 16px;

    }

    #edit-modal .modal-header{

      display:flex;

      align-items:center;

      justify-content: space-between;

      gap: 10px;

      margin-bottom: 10px;

    }

    #edit-modal .modal-title{

      margin: 0;

      font-size: 16px;

      font-weight: 900;

      color: var(--navy);

    }

    #edit-modal .modal-close{

      background: transparent;

      border: 0;

      cursor: pointer;

      font-size: 22px;

      line-height: 1;

      color: var(--muted);

      padding: 6px 10px;

      border-radius: 12px;

    }

    #edit-modal .modal-close:focus{ outline: none; box-shadow: var(--ring); }

    #edit-modal .modal-actions{

      display:flex;

      justify-content: flex-end;

      gap: 10px;

      margin-top: 12px;

      flex-wrap: wrap;

    }



    /* =========================

       ✅ Inline Validation Styling (NEW)

       ========================= */

    .req-asterisk{

      color: #d93025;

      margin-left: 6px;

      font-weight: 900;

    }



    .input-error{

      border: 1px solid #d93025 !important;

      box-shadow: 0 0 0 4px rgba(217,48,37,.12) !important;

    }



    .field-error{

      color: #d93025;

      font-size: 12px;

      margin-top: 6px;

      line-height: 1.2;

    }



    /* Wrap to ensure message sits nicely under controls */

    .field-wrap{ display: block; }



    /* =========================

       Mobile: Sidebar drawer

       ========================= */

    @media (max-width: 980px){

      .app{

        grid-template-columns: 1fr;

        grid-template-areas:

          "nav"

          "main";

      }



      .hamburger{ display: inline-flex; align-items:center; gap:8px; }



      .sidebar{

        position: fixed;

        top: var(--navbar-h);

        left: 0;

        width: min(var(--sidebar-w), 88vw);

        height: calc(100vh - var(--navbar-h));

        transform: translateX(-110%);

        transition: transform .18s ease;

        z-index: 80;

        box-shadow: var(--shadow-2);

      }



      body.sidebar-open .sidebar{

        transform: translateX(0);

      }



      .backdrop{

        position: fixed;

        inset: var(--navbar-h) 0 0 0;

        background: rgba(17,17,17,.35);

        opacity: 0;

        pointer-events: none;

        transition: opacity .18s ease;

        z-index: 70;

      }



      body.sidebar-open .backdrop{

        opacity: 1;

        pointer-events: auto;

      }



      .main{ padding: 14px; }

    }

    



/* =========================

   Stock Management (Accordion card-style)

   ========================= */





/* =========================

   Stock Management in sidebar — match .nav a look (no extra shadow box)

   ========================= */



.menu {

  width: 100%;

  font-family: var(--font);

}



/* Make the details container invisible (no card/shadow) */

.menu-group {

  border: 0;

  border-radius: 0;

  background: transparent;

  box-shadow: none;

  padding: 0;

  margin: 0;

}



/* Summary styled exactly like .nav a */

.menu-label {

  display: flex;

  align-items: center;

  justify-content: space-between;

  padding: 10px 12px;

  border-radius: 14px; /* same as .nav a */

  border: 1px solid transparent;

  background: linear-gradient(180deg, var(--surface-2), var(--surface));

  color: var(--navy);

  font-weight: 800;

  cursor: pointer;

  list-style: none;

}

.menu-label:hover {

  border-color: rgba(51,122,183,.25);

  text-decoration: none;

}



/* Focus ring same as your summary/buttons */

.menu-group > summary:focus {

  outline: none;

  box-shadow: var(--ring);

}

.menu-group > summary::-webkit-details-marker { display: none; }





.menu-group[open] .chevron {

  transform: rotate(180deg);

  background: rgba(51,122,183,.16);

}



/* Submenu is just a small indented list (no card) */

.submenu {

  list-style: none;

  margin: 8px 0 0 0;   /* space under summary */

  padding: 0;

}



/* Each submenu link styled like .nav a, slightly indented */

.submenu li { margin: 6px 0; }



.submenu a {

  display: flex;

  align-items: center;

  justify-content: space-between;

  padding: 10px 12px;

  border-radius: 14px;

  border: 1px solid transparent;

  background: linear-gradient(180deg, var(--surface-2), var(--surface));

  color: var(--navy);

  font-weight: 800;

  text-decoration: none;

  margin-left: 12px; /* visual indent under Stock Management */

}

.submenu a:hover {

  border-color: rgba(51,122,183,.25);

  text-decoration: none;

}



/* Optional small accent dot before text */

.submenu-text::before {

  content: "";

  display: inline-block;

  width: 8px;

  height: 8px;

  border-radius: 999px;

  background: var(--blue-wash);

  border: 1px solid rgba(51,122,183,.18);

  margin-right: 10px;

  vertical-align: middle;

}



/* Reuse your existing badge look for right side */

.submenu a .badge {

  font-size: 12px;

  padding: 3px 8px;

  border-radius: 999px;

  background: rgba(51,122,183,.12);

  color: var(--blue-dark);

  border: 1px solid rgba(51,122,183,.18);

  font-weight: 900;

  white-space: nowrap;

}



/* Dark mode alignment */

@media (prefers-color-scheme: dark) {

  .menu-label {

    color: var(--text);

  }

  .submenu a {

    color: var(--text);

  }

}



  .badge {

    color: #9ca3af;

    font-size: 12px;

  }



  </style>

</head>



<body>



  <div class="app">

    <!-- ✅ Reference Navbar -->

    <header class="navbar" role="banner" aria-label="Navbar">

      <div class="nav-left">

        <button class="hamburger" id="sidebarToggle" type="button"

                aria-label="Toggle sidebar" aria-expanded="false" aria-controls="sidebar">

          ☰ <span style="font-weight:900;">Menu</span>

        </button>



        <div class="brand" aria-label="Brand">

          <div class="logo" aria-hidden="true"></div>

          <div class="brand-title">

            <strong>MediSync</strong>

          </div>

        </div>

      </div>



     



      <div class="nav-right" aria-label="Account and status">

        <span class="pill" title="System status">

          <span class="dot" aria-hidden="true"></span>

          Online

        </span>



        <details class="menu" id="accountMenu">

          <summary aria-label="Open account menu">Account</summary>

          <nav class="dropdown" aria-label="Account options">

            <a href="../Common Features/login.html" id="logoutLink">Logout</a>

          </nav>

        </details>

      </div>

    </header>



    <!-- Sidebar -->

    <aside class="sidebar" id="sidebar" aria-label="Sidebar">

      <div class="side-card">

        <div class="side-title"></div>

        <nav class="nav">

        <a href="Headoffice_Dashboard.html">

            Dashboard <span class="badge">›</span>

          </a>

          <a href="UserManagement.html">

            UserManagement <span class="badge">›</span>

          </a>

      <a href="branchreg.html">

           Branch Registration <span class="badge">›</span>

          </a>

         <nav class="menu">

  

<details class="menu-group">

  <summary class="menu-label">

    <span>Vendor Procurement</span>

    <span class="badge">›</span>

  </summary>

  <ul class="submenu">

    <li>

      <a href="viewbids.html">

        <span class="submenu-text">View Bids</span>

        <span class="badge">›</span>

      </a>

    </li>

    <li>

      <a href="blacklist.html">

        <span class="submenu-text">Vendor Blacklist</span>

        <span class="badge">›</span>

      </a>

    </li>

      <li>

      <a href="../StoreManager/delivery-status.html">

        <span class="submenu-text">Order Status</span>

        <span class="badge">›</span>

      </a>

    </li>

  </ul>

</details>

          

<nav class="menu">

  

<details class="menu-group">

  <summary class="menu-label">

    <span>Stock Management</span>

    <span class="badge">›</span>

  </summary>

  <ul class="submenu">

    <li>

      <a href="Inventory_view.html">

        <span class="submenu-text">Inventory View</span>

        <span class="badge">›</span>

      </a>

    </li>

    <li>

      <a href="notification.html">

        <span class="submenu-text">Notification</span>

        <span class="badge">›</span>

      </a>

    </li>

    <li>

      <a href="stockreport.html">

        <span class="submenu-text">Stock Report</span>

        <span class="badge">›</span>

      </a>

    </li>

  </ul>

</details>



</nav>



        </nav>

      </div>



      <!-- <div class="side-card">

        <div class="side-title">Tips</div>

        <p>Use search to filter by <b>User ID</b> or <b>Name</b>.</p>

        <p>Inline edit is enabled by default (you can switch to modal in JS).</p>

      </div> -->

    </aside>



    <div class="backdrop" id="backdrop" aria-hidden="true"></div>



    <!-- Main -->

    <main class="main" id="main" tabindex="-1">

      <div class="page-title">

        <div>

          <h2>User Management</h2>

        </div>

      </div>



      <div id="user-management" class="um-wrap">

        <!-- Search -->

        <section id="search-section" class="card" aria-label="Search users">

          <label for="search" class="label">Search User (Name or ID)</label>

          <div class="um-row">

            <input id="search" name="search" type="text" class="input" placeholder="Enter Name or User ID" />

          </div>

        </section>



        <!-- Results -->

        <section id="results-section" class="card" aria-label="User results">

          <h3>Users</h3>

          <div style="overflow:auto;">

            <table id="users-table" class="um-table">

              <thead>

                <tr>

                  <th>User ID</th>

                  <th>User Name</th>

                  <th>Email</th>

                  <th>Status</th>

                  <th>Role</th>

                  <th style="width: 220px;">Actions</th>

                </tr>

              </thead>

              <tbody id="users-tbody">

                <tr>

                  <td>U001</td>

                  <td>John Doe</td>

                  <td>john.doe@example.com</td>

                  <td><span class="badge green">Active</span></td>

                  <td>Pharmacist</td>

                  <td>

                    <div class="um-actions">

                      <button class="btn sm ghost btn-edit" type="button">Edit</button>

                      <button class="btn sm danger btn-delete" type="button">Delete</button>

                    </div>

                  </td>

                </tr>

                <tr>

                  <td>U002</td>

                  <td>Jane Smith</td>

                  <td>jane.smith@example.com</td>

                  <td><span class="badge">Inactive</span></td>

                  <td>Store Manager</td>

                  <td>

                    <div class="um-actions">

                      <button class="btn sm ghost btn-edit" type="button">Edit</button>

                      <button class="btn sm danger btn-delete" type="button">Delete</button>

                    </div>

                  </td>

                </tr>

                <tr>

                  <td>U003</td>

                  <td>Mike Johnson</td>

                  <td>mike.j@example.com</td>

                  <td><span class="badge green">Active</span></td>

                  <td>Vendor</td>

                  <td>

                    <div class="um-actions">

                      <button class="btn sm ghost btn-edit" type="button">Edit</button>

                      <button class="btn sm danger btn-delete" type="button">Delete</button>

                    </div>

                  </td>

                </tr>

              </tbody>

            </table>

          </div>

        </section>



        <!-- Form -->

        <section class="card" aria-label="Add new user">

          <h3>Add / Update User</h3>



          <form id="user-form" novalidate>

            <div class="um-form-fields">

              <div class="field-wrap">

                <label for="userName" class="label">User Name</label>

                <input id="userName" name="userName" type="text" class="input" required />

              </div>



              <div class="field-wrap">

                <label for="email" class="label">Email</label>

                <input id="email" name="email" type="email" class="input" required />

              </div>



              <div class="field-wrap">

                <label for="status" class="label">Status</label>

                <select id="status" name="status" class="select" required>

                  <option value="">-- Select Status --</option>

                  <option value="Active">Active</option>

                  <option value="Inactive">Inactive</option>

                </select>

              </div>



              <div class="field-wrap">

                <label for="role" class="label">Role</label>

                <select id="role" name="role" class="select" required>

                  <option value="">-- Select Role --</option>

                  <option value="Pharmacist">Pharmacist</option>

                  <option value="Store Manager">Store Manager</option>

                  <option value="Vendor">Vendor</option>

                </select>

              </div>

            </div>

          </form>



          <div class="um-actions" style="margin-top: 14px;">

            <button type="submit" form="user-form" class="btn secondary">Save</button>

            <button type="reset" form="user-form" class="btn ghost">Cancel</button>

          </div>

        </section>

      </div>

    </main>

  </div>



  <script>

    // Mobile sidebar toggle (reference behavior)

    (function(){

      const btn = document.getElementById('sidebarToggle');

      const backdrop = document.getElementById('backdrop');



      function setOpen(open){

        document.body.classList.toggle('sidebar-open', open);

        btn?.setAttribute('aria-expanded', open ? 'true' : 'false');

      }



      btn?.addEventListener('click', () => {

        const isOpen = document.body.classList.contains('sidebar-open');

        setOpen(!isOpen);

      });



      backdrop?.addEventListener('click', () => setOpen(false));



      document.addEventListener('keydown', (e) => {

        if(e.key === 'Escape') setOpen(false);

      });

    })();

  </script>



  <script>

  (function () {

    /* =========================

       SETTINGS

    ========================== */

    const EDIT_MODE = 'inline'; // 'inline' or 'modal'

    const RESET_SEARCH_AFTER_ADD = true;



    /* =========================

       ELEMENTS

    ========================== */

    const searchInput = document.getElementById('search');

    const tbody = document.getElementById('users-tbody');

    const userForm = document.getElementById('user-form');



    // Single reusable "No results" row

    const noResultsRow = document.createElement('tr');

    noResultsRow.className = 'no-results';

    const noResultsCell = document.createElement('td');

    noResultsCell.colSpan = 6;

    noResultsCell.textContent = 'No users found for your search.';

    noResultsRow.appendChild(noResultsCell);



    /* =========================

       ✅ INLINE VALIDATION HELPERS (NEW)

    ========================== */

    function setFieldError(fieldEl, message) {

      if (!fieldEl) return;



      fieldEl.classList.add('input-error');

      fieldEl.setAttribute('aria-invalid', 'true');



      const host = fieldEl.closest('.field-wrap') || fieldEl.parentElement;

      if (!host) return;



      let err = host.querySelector('.field-error');

      if (!err) {

        err = document.createElement('div');

        err.className = 'field-error';

        err.setAttribute('role', 'alert');

        err.setAttribute('aria-live', 'polite');

        host.appendChild(err);

      }

      err.textContent = message;

    }



    function clearFieldError(fieldEl) {

      if (!fieldEl) return;



      fieldEl.classList.remove('input-error');

      fieldEl.removeAttribute('aria-invalid');



      const host = fieldEl.closest('.field-wrap') || fieldEl.parentElement;

      const err = host?.querySelector('.field-error');

      if (err) err.remove();

    }



    function clearScopeErrors(scopeEl) {

      scopeEl.querySelectorAll('input, select, textarea').forEach(el => clearFieldError(el));

    }



    function attachAutoClear(scopeEl) {

      scopeEl.querySelectorAll('input, select, textarea').forEach(el => {

        el.addEventListener('input', () => clearFieldError(el));

        el.addEventListener('change', () => clearFieldError(el));

        el.addEventListener('blur', () => {

          // remove empty error blocks if any

          const host = el.closest('.field-wrap') || el.parentElement;

          const err = host?.querySelector('.field-error');

          if (err && !err.textContent.trim()) err.remove();

        });

      });

    }



    function addRequiredAsterisks() {

      document.querySelectorAll('label[for]').forEach(label => {

        const id = label.getAttribute('for');

        const field = document.getElementById(id);

        if (!field) return;



        if (field.hasAttribute('required')) {

          if (!label.querySelector('.req-asterisk')) {

            const star = document.createElement('span');

            star.className = 'req-asterisk';

            star.textContent = '*';

            label.appendChild(star);

          }

        }

      });

    }



    /* =========================

       HELPERS

    ========================== */

    function debounce(fn, delay = 180) {

      let t;

      return (...args) => {

        clearTimeout(t);

        t = setTimeout(() => fn.apply(null, args), delay);

      };

    }



    function validateEmail(email) {

      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

    }



    function renderStatusCell(status) {

      const s = (status || '').toLowerCase();

      if (s === 'active') return '<span class="badge green">Active</span>';

      if (s === 'inactive') return '<span class="badge">Inactive</span>';

      return status || '';

    }



    function createActionButtonsHTML() {

      return `

        <div class="um-actions">

          <button class="btn sm ghost btn-edit" type="button">Edit</button>

          <button class="btn sm danger btn-delete" type="button">Delete</button>

        </div>

      `;

    }



    function getRowData(tr) {

      const cells = tr.querySelectorAll('td');

      return {

        id: cells[0]?.textContent.trim() || '',

        name: cells[1]?.textContent.trim() || '',

        email: cells[2]?.textContent.trim() || '',

        status:

          (cells[3]?.textContent.trim().match(/Active|Inactive/i)?.[0]) ||

          cells[3]?.textContent.trim() ||

          '',

        role: cells[4]?.textContent.trim() || ''

      };

    }



    function setRowData(tr, data) {

      const cells = tr.querySelectorAll('td');

      if (cells[1]) cells[1].textContent = data.name;

      if (cells[2]) cells[2].textContent = data.email;

      if (cells[3]) cells[3].innerHTML = renderStatusCell(data.status);

      if (cells[4]) cells[4].textContent = data.role;

      if (cells[5]) cells[5].innerHTML = createActionButtonsHTML();

      tr.classList.remove('editing');

      tr.removeAttribute('data-original');

    }



    function getExistingEmails(excludeTr = null) {

      return Array.from(tbody.querySelectorAll('tr'))

        .filter(tr => !tr.classList.contains('no-results') && tr !== excludeTr)

        .map(tr => {

          const emailCell = tr.querySelectorAll('td')[2];

          return (emailCell ? emailCell.textContent.trim().toLowerCase() : '');

        })

        .filter(Boolean);

    }



    function parseIdNumber(idText) {

      const m = String(idText || '').match(/U(\d+)/i);

      return m ? parseInt(m[1], 10) : null;

    }



    function getNextUserId() {

      const nums = Array.from(tbody.querySelectorAll('tr'))

        .filter(tr => !tr.classList.contains('no-results'))

        .map(tr => {

          const idCell = tr.querySelectorAll('td')[0];

          return parseIdNumber(idCell ? idCell.textContent.trim() : '');

        })

        .filter(n => typeof n === 'number');



      const max = nums.length ? Math.max(...nums) : 0;

      const next = max + 1;

      return 'U' + String(next).padStart(3, '0');

    }



    function addUserRow({ id, name, email, status, role }) {

      const tr = document.createElement('tr');

      tr.innerHTML = `

        <td>${id}</td>

        <td>${name}</td>

        <td>${email}</td>

        <td>${renderStatusCell(status)}</td>

        <td>${role}</td>

        <td>${createActionButtonsHTML()}</td>

      `;

      tbody.appendChild(tr);



      tr.style.transition = 'background-color 400ms ease';

      tr.style.backgroundColor = 'rgba(51, 122, 183, 0.10)';

      setTimeout(() => (tr.style.backgroundColor = ''), 1200);



      return tr;

    }



    /* =========================

       SEARCH (ID or NAME)

    ========================== */

    function filterUsers(query) {

      const q = (query || '').trim().toLowerCase();



      if (noResultsRow.parentElement === tbody) {

        tbody.removeChild(noResultsRow);

      }



      const rows = Array.from(tbody.querySelectorAll('tr')).filter(

        tr => !tr.classList.contains('no-results')

      );



      let matchCount = 0;



      rows.forEach(tr => {

        const cells = tr.querySelectorAll('td');

        const userId = (cells[0]?.textContent || '').trim().toLowerCase();

        const userName = (cells[1]?.textContent || '').trim().toLowerCase();



        if (!q) {

          tr.style.display = '';

          matchCount++;

          return;

        }

        const matches = userId.includes(q) || userName.includes(q);

        tr.style.display = matches ? '' : 'none';

        if (matches) matchCount++;

      });



      if (matchCount === 0) {

        tbody.appendChild(noResultsRow);

      }

    }



    searchInput.addEventListener('input', debounce(e => {

      filterUsers(e.target.value);

    }, 200));

    searchInput.addEventListener('keyup', e => {

      if (e.key === 'Enter') filterUsers(e.target.value);

    });

    filterUsers(searchInput.value);



    /* =========================

       INLINE EDIT MODE

    ========================== */

    function createSelect(options, selected) {

      const sel = document.createElement('select');

      sel.className = 'select';

      options.forEach(opt => {

        const o = document.createElement('option');

        o.value = opt;

        o.textContent = opt;

        if (String(opt).toLowerCase() === String(selected).toLowerCase()) {

          o.selected = true;

        }

        sel.appendChild(o);

      });

      return sel;

    }



    function wrapField(el) {

      const wrap = document.createElement('div');

      wrap.className = 'field-wrap';

      wrap.appendChild(el);

      return wrap;

    }



    function startInlineEdit(tr) {

      const currentEditing = tbody.querySelector('tr.editing');

      if (currentEditing && currentEditing !== tr) {

        cancelInlineEdit(currentEditing);

      }



      tr.classList.add('editing');



      const cells = tr.querySelectorAll('td');

      const original = getRowData(tr);

      tr.dataset.original = JSON.stringify(original);



      const nameInput = document.createElement('input');

      nameInput.type = 'text';

      nameInput.className = 'input';

      nameInput.value = original.name;



      const emailInput = document.createElement('input');

      emailInput.type = 'email';

      emailInput.className = 'input';

      emailInput.value = original.email;



      const statusSelect = createSelect(['Active', 'Inactive'], original.status);

      const roleSelect = createSelect(['Pharmacist', 'Store Manager', 'Vendor'], original.role);



      cells[1].innerHTML = '';

      cells[1].appendChild(wrapField(nameInput));



      cells[2].innerHTML = '';

      cells[2].appendChild(wrapField(emailInput));



      cells[3].innerHTML = '';

      cells[3].appendChild(wrapField(statusSelect));



      cells[4].innerHTML = '';

      cells[4].appendChild(wrapField(roleSelect));



      cells[5].innerHTML = `

        <div class="um-actions">

          <button class="btn sm secondary btn-inline-save" type="button">Save</button>

          <button class="btn sm ghost btn-inline-cancel" type="button">Cancel</button>

        </div>

      `;



      // auto clear errors while typing

      attachAutoClear(tr);

    }



    function saveInlineEdit(tr) {

      const cells = tr.querySelectorAll('td');



      const nameInput = cells[1].querySelector('input');

      const emailInput = cells[2].querySelector('input');

      const statusSelect = cells[3].querySelector('select');

      const roleSelect = cells[4].querySelector('select');



      const nameVal = nameInput?.value.trim() || '';

      const emailVal = emailInput?.value.trim() || '';

      const statusVal = statusSelect?.value || '';

      const roleVal = roleSelect?.value || '';



      clearScopeErrors(tr);



      let hasError = false;



      if (!nameVal) { setFieldError(nameInput, 'User Name is required.'); hasError = true; }

      if (!emailVal) { setFieldError(emailInput, 'Email is required.'); hasError = true; }

      else if (!validateEmail(emailVal)) { setFieldError(emailInput, 'Please enter a valid email.'); hasError = true; }



      if (!statusVal) { setFieldError(statusSelect, 'Please select a Status.'); hasError = true; }

      if (!roleVal) { setFieldError(roleSelect, 'Please select a Role.'); hasError = true; }



      // Duplicate email check (exclude current row)

      if (!hasError) {

        const existing = getExistingEmails(tr);

        if (existing.includes(emailVal.toLowerCase())) {

          setFieldError(emailInput, 'A user with this email already exists.');

          hasError = true;

        }

      }



      if (hasError) return;



      setRowData(tr, { name: nameVal, email: emailVal, status: statusVal, role: roleVal });

    }



    function cancelInlineEdit(tr) {

      const original = tr.dataset.original ? JSON.parse(tr.dataset.original) : getRowData(tr);

      setRowData(tr, original);

    }



    /* =========================

       MODAL EDIT MODE

    ========================== */

    const modal = document.createElement('div');

    modal.id = 'edit-modal';

    modal.style.display = 'none';

    modal.innerHTML = `

      <div class="modal-card" role="dialog" aria-modal="true" aria-label="Edit user">

        <div class="modal-header">

          <h3 class="modal-title">Edit User</h3>

          <button class="modal-close" type="button" aria-label="Close">&times;</button>

        </div>

        <div class="modal-body">

          <div class="field-wrap">

            <label class="label" for="modal-userName">User Name</label>

            <input type="text" id="modal-userName" class="input" required>

          </div>



          <div class="field-wrap" style="margin-top:10px;">

            <label class="label" for="modal-email">Email</label>

            <input type="email" id="modal-email" class="input" required>

          </div>



          <div class="field-wrap" style="margin-top:10px;">

            <label class="label" for="modal-status">Status</label>

            <select id="modal-status" class="select" required>

              <option value="">-- Select Status --</option>

              <option value="Active">Active</option>

              <option value="Inactive">Inactive</option>

            </select>

          </div>



          <div class="field-wrap" style="margin-top:10px;">

            <label class="label" for="modal-role">Role</label>

            <select id="modal-role" class="select" required>

              <option value="">-- Select Role --</option>

              <option value="Pharmacist">Pharmacist</option>

              <option value="Store Manager">Store Manager</option>

              <option value="Vendor">Vendor</option>

            </select>

          </div>

        </div>

        <div class="modal-actions">

          <button class="btn secondary" id="modal-save" type="button">Save</button>

          <button class="btn ghost" id="modal-cancel" type="button">Cancel</button>

        </div>

      </div>

    `;

    document.body.appendChild(modal);



    let modalContextRow = null;



    function openModalEdit(tr) {

      const data = getRowData(tr);

      modalContextRow = tr;



      document.getElementById('modal-userName').value = data.name || '';

      document.getElementById('modal-email').value = data.email || '';

      document.getElementById('modal-status').value = data.status || '';

      document.getElementById('modal-role').value = data.role || '';



      clearScopeErrors(modal);

      modal.style.display = 'flex';

      attachAutoClear(modal);

    }



    function closeModal() {

      modal.style.display = 'none';

      modalContextRow = null;

      clearScopeErrors(modal);

    }



    modal.querySelector('.modal-close').addEventListener('click', closeModal);

    modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

    document.getElementById('modal-cancel').addEventListener('click', closeModal);



    document.getElementById('modal-save').addEventListener('click', () => {

      if (!modalContextRow) return;



      const nameInput = document.getElementById('modal-userName');

      const emailInput = document.getElementById('modal-email');

      const statusSelect = document.getElementById('modal-status');

      const roleSelect = document.getElementById('modal-role');



      const nameVal = nameInput.value.trim();

      const emailVal = emailInput.value.trim();

      const statusVal = statusSelect.value;

      const roleVal = roleSelect.value;



      clearScopeErrors(modal);



      let hasError = false;

      if (!nameVal) { setFieldError(nameInput, 'User Name is required.'); hasError = true; }

      if (!emailVal) { setFieldError(emailInput, 'Email is required.'); hasError = true; }

      else if (!validateEmail(emailVal)) { setFieldError(emailInput, 'Please enter a valid email.'); hasError = true; }



      if (!statusVal) { setFieldError(statusSelect, 'Please select a Status.'); hasError = true; }

      if (!roleVal) { setFieldError(roleSelect, 'Please select a Role.'); hasError = true; }



      // Duplicate email check (exclude current row)

      if (!hasError) {

        const existing = getExistingEmails(modalContextRow);

        if (existing.includes(emailVal.toLowerCase())) {

          setFieldError(emailInput, 'A user with this email already exists.');

          hasError = true;

        }

      }



      if (hasError) return;



      setRowData(modalContextRow, { name: nameVal, email: emailVal, status: statusVal, role: roleVal });

      closeModal();

    });



    /* =========================

       TABLE ACTIONS (Edit/Delete)

    ========================== */

    tbody.addEventListener('click', (e) => {

      const target = e.target;

      if (!(target instanceof HTMLElement)) return;

      e.preventDefault();



      const btnText = target.textContent?.trim().toLowerCase();

      const isEditBtn = target.classList.contains('btn-edit') || btnText === 'edit';

      const isDeleteBtn = target.classList.contains('btn-delete') || btnText === 'delete';

      const isInlineSave = target.classList.contains('btn-inline-save') || btnText === 'save';

      const isInlineCancel = target.classList.contains('btn-inline-cancel') || btnText === 'cancel';



      const tr = target.closest('tr');

      if (!tr || tr.classList.contains('no-results')) return;



      if (isEditBtn) {

        if (EDIT_MODE === 'inline') startInlineEdit(tr);

        else openModalEdit(tr);

        return;

      }



      if (isInlineSave) { saveInlineEdit(tr); return; }

      if (isInlineCancel) { cancelInlineEdit(tr); return; }



      if (isDeleteBtn) {

        const data = getRowData(tr);

        const ok = confirm(`Delete user "${data.name}" (${data.id})? This cannot be undone.`);

        if (ok) {

          tr.remove();

          filterUsers(searchInput.value);

        }

      }

    });



    /* =========================

       ADD NEW USER (Form submit)

    ========================== */

    attachAutoClear(userForm);



    userForm.addEventListener('submit', function (e) {

      e.preventDefault();



      const nameInput = document.getElementById('userName');

      const emailInput = document.getElementById('email');

      const statusSelect = document.getElementById('status');

      const roleSelect = document.getElementById('role');



      const nameVal = (nameInput.value || '').trim();

      const emailVal = (emailInput.value || '').trim();

      const statusVal = statusSelect.value;

      const roleVal = roleSelect.value;



      clearScopeErrors(userForm);



      let hasError = false;



      if (!nameVal) { setFieldError(nameInput, 'User Name is required.'); hasError = true; }

      if (!emailVal) { setFieldError(emailInput, 'Email is required.'); hasError = true; }

      else if (!validateEmail(emailVal)) { setFieldError(emailInput, 'Please enter a valid email.'); hasError = true; }



      if (!statusVal) { setFieldError(statusSelect, 'Please select a Status.'); hasError = true; }

      if (!roleVal) { setFieldError(roleSelect, 'Please select a Role.'); hasError = true; }



      if (!hasError) {

        const existingEmails = getExistingEmails();

        if (existingEmails.includes(emailVal.toLowerCase())) {

          setFieldError(emailInput, 'A user with this email already exists.');

          hasError = true;

        }

      }



      if (hasError) {

        (userForm.querySelector('.input-error') || nameInput)?.focus();

        return;

      }



      const nextId = getNextUserId();

      const newRow = addUserRow({

        id: nextId,

        name: nameVal,

        email: emailVal,

        status: statusVal,

        role: roleVal

      });



      userForm.reset();

      clearScopeErrors(userForm);



      if (RESET_SEARCH_AFTER_ADD) {

        searchInput.value = '';

        filterUsers('');

      } else {

        filterUsers(searchInput.value);

      }



      newRow.scrollIntoView({ behavior: 'smooth', block: 'center' });

    });



    /* =========================

       REQUIRED ASTERISKS INIT (NEW)

    ========================== */

    addRequiredAsterisks();         // Add * to Add/Update form labels

    addRequiredAsterisks();         // Safe double call

    // For modal labels: modal exists now, add stars too

    addRequiredAsterisks();



  })();

    (function(){

      const logoutLink = document.getElementById('logoutLink');  // the <a id="logoutLink">

      const accountMenu = document.getElementById('accountMenu'); // <details> (optional)



      if(!logoutLink) return;



      logoutLink.addEventListener('click', (e) => {

        e.preventDefault(); // stop instant navigation



        const ok = confirm('Are you sure you want to logout?');

        if(ok){

          // close the dropdown (nice UX)

          if(accountMenu) accountMenu.removeAttribute('open');



          // redirect to login page (from href)

          window.location.href = logoutLink.getAttribute('href') || '../Common Features/login.html';

        }

      });

    })();

  </script>

</body>

</html>