
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stock Management · Notifications</title>

  <!-- =========================
       Style System (Same tokens)
       ========================= -->
  <style>
    /* Theme Tokens (same as your page) */
    :root{
      --blue: #337AB7; --green: #5CB85C; --navy: #10324A; --forest: #1F4E2E;
      --black: #111111; --gray: #515151; --light-gray: #E5E5E5; --white: #FFFFFF;
      --very-light-green: #F5FBF7; --very-light-blue: #EAF3FA;

      --blue-dark: #285A8E; --blue-soft: #6FA8DC;
      --green-dark: #3E8E5A; --green-light: #8FD19E;
      --gray-balanced: #A0A0A0; --off-white: #FAFAF8;
      --green-wash: #E8F7EE; --blue-wash: #D6EAF8;

      --amber: #F0AD4E; --red: #D9534F; --purple: #8E44AD;
      --yellow: #FFCE54; --aqua: #5BC0DE;

      --bg: var(--off-white); --surface: var(--white); --surface-2: #fcfcfb;
      --text: var(--black); --muted: var(--gray); --border: rgba(16, 50, 74, 0.14);
      --shadow: 0 8px 24px rgba(17,17,17,.08);
      --shadow-2: 0 10px 30px rgba(16, 50, 74, .10);
      --ring: 0 0 0 4px rgba(51, 122, 183, .25);

      --radius: 16px; --radius-sm: 12px; --gap: 16px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      --sidebar-w: 290px; --navbar-h: 72px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0b141b; --surface: #0f1e28; --surface-2: #10222d;
        --text: #f4f6f8; --muted: #c1c7cd; --border: rgba(229,229,229,.12);
        --shadow: 0 10px 30px rgba(0,0,0,.45); --shadow-2: 0 10px 30px rgba(0,0,0,.5);
      }
    }

    /* Base */
    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0; font-family:var(--font); color:var(--text);
      background: linear-gradient(180deg, var(--very-light-blue), var(--bg) 45%);
      line-height:1.4;
    }
    a{ color: var(--blue); text-decoration:none; } a:hover{ text-decoration:underline; }

    .skip-link{
      position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
    }
    .skip-link:focus{
      left:12px; top:12px; width:auto; height:auto; padding:10px 12px;
      border-radius:12px; background:var(--surface); box-shadow:var(--shadow);
      outline:none; z-index:9999;
    }

    /* Layout */
    .app{
      min-height:100vh; display:grid;
      grid-template-rows: var(--navbar-h) 1fr;
      grid-template-columns: var(--sidebar-w) 1fr;
      grid-template-areas: "nav nav" "side main";
    }

    /* Navbar */
    .navbar{
      grid-area: nav; position: sticky; top:0; z-index:50;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:12px 16px; border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.7); backdrop-filter: blur(10px);
    }
    @media (prefers-color-scheme: dark){ .navbar{ background: rgba(15,30,40,.75); } }
    .nav-left,.nav-right{ display:flex; align-items:center; gap:12px; min-width:0; }
    .brand{ display:flex; align-items:center; gap:12px; min-width:220px; }
    .logo{ width:44px; height:44px; border-radius:14px; background: conic-gradient(from 200deg, var(--blue), var(--aqua), var(--green)); box-shadow: var(--shadow-2); position:relative; flex:0 0 auto; }
    .logo::after{ content:""; position:absolute; inset:10px; border-radius:10px; background: rgba(255,255,255,.88); }
    .brand-title{ display:grid; gap:2px; min-width:0; }
    .brand-title strong{ color:var(--navy); font-size:14px; letter-spacing:.2px; }
    .brand-title small{ color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .hamburger{
      display:none; border:1px solid var(--border); background:var(--surface); color:var(--navy);
      border-radius:14px; padding:10px 12px; cursor:pointer; box-shadow:var(--shadow);
      font-weight:800;
    }
    .hamburger:focus{ outline:none; box-shadow: var(--ring), var(--shadow); }

    .search{ display:flex; align-items:center; gap:10px; flex:1; max-width:640px; min-width:220px; }
    .search input[type="search"]{
      width:100%; padding:11px 12px; border-radius:14px; border:1px solid var(--border);
      background:var(--surface); color:var(--text); outline:none;
    }
    .search input[type="search"]:focus{ box-shadow: var(--ring); border-color: rgba(51,122,183,.55); }

    .btn{
      border:0; cursor:pointer; padding:11px 12px; border-radius:14px; background:var(--blue);
      color:#fff; font-weight:700; letter-spacing:.2px; box-shadow:var(--shadow);
      transition: transform .08s ease, filter .2s ease; white-space:nowrap;
    }
    .btn:hover{ filter:brightness(1.03); }
    .btn:active{ transform: translateY(1px); }
    .btn:focus{ outline:none; box-shadow: var(--ring), var(--shadow); }
    .btn.neutral{ background:var(--surface); color:var(--navy); border:1px solid var(--border); }
    .btn.secondary{ background:var(--green); }

    .pill{ display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; border:1px solid var(--border); background:var(--surface); color:var(--muted); font-size:12px; white-space:nowrap; }
    .dot{ width:8px; height:8px; border-radius:50%; background:var(--green); box-shadow:0 0 0 4px rgba(92,184,92,.18); }

    details.menu{ position:relative; }
    details.menu > summary{
      list-style:none; cursor:pointer; user-select:none; padding:10px 12px; border-radius:14px; border:1px solid var(--border);
      background:var(--surface); box-shadow:var(--shadow); font-weight:800; color:var(--navy); outline:none; white-space:nowrap;
    }
    details.menu > summary::-webkit-details-marker{ display:none; }
    details.menu > summary:focus{ box-shadow: var(--ring), var(--shadow); }
    .dropdown{
      position:absolute; right:0; top:52px; width:220px; background:var(--surface);
      border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow-2);
      padding:10px; z-index:60;
    }
    .dropdown a{ display:block; padding:10px; border-radius:12px; color:var(--text); font-weight:700; }
    .dropdown a:hover{ background: linear-gradient(90deg, rgba(51,122,183,.12), transparent); text-decoration:none; }

    /* Sidebar */
    .sidebar{
      grid-area: side; padding:16px; border-right:1px solid var(--border);
      background: rgba(245, 251, 247, .65); backdrop-filter: blur(8px); overflow:auto;
    }
    @media (prefers-color-scheme: dark){ .sidebar{ background: rgba(15,30,40,.55); } }
    .side-card{ background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px; margin-bottom:14px; }
    .side-title{ font-size:12px; color:var(--muted); margin:2px 4px 10px; text-transform:uppercase; letter-spacing:.12em; }
    .nav{ display:grid; gap:8px; }
    .nav a{
      display:flex; align-items:center; justify-content:space-between; padding:10px 12px;
      border-radius:14px; border:1px solid transparent; background: linear-gradient(180deg, var(--surface-2), var(--surface));
      color:var(--navy); font-weight:800;
    }
    .nav a:hover{ border-color: rgba(51,122,183,.25); text-decoration:none; }
    .nav a[aria-current="page"]{ border-color: rgba(51,122,183,.40); box-shadow: 0 0 0 4px rgba(51,122,183,.12); }
    .badge{ font-size:12px; padding:3px 8px; border-radius:999px; background: rgba(51,122,183,.12); color: var(--blue-dark); border: 1px solid rgba(51,122,183,.18); font-weight:900; white-space:nowrap; }
    .badge.green{ background: rgba(92,184,92,.14); color: var(--green-dark); border-color: rgba(92,184,92,.18); }
    .badge.amber{ background: rgba(240,173,78,.18); color: #825200; border-color: rgba(240,173,78,.22); }
    .badge.red{ background: rgba(217,83,79,.18); color: #8b1f1b; border-color: rgba(217,83,79,.22); }

    .side-card p{ margin:0; color:var(--muted); font-size:12px; }
    .side-card p + p{ margin-top:8px; }

    /* Main */
    .main{ grid-area: main; padding:16px; overflow:auto; }
    .page-title{ display:flex; align-items:flex-start; justify-content:space-between; gap:var(--gap); margin-bottom:14px; }
    .page-title h2{ margin:0; font-size:22px; letter-spacing:.2px; color:var(--navy); }
    .page-title p{ margin:6px 0 0; color:var(--muted); max-width:75ch; }
    .hint{ color:var(--muted); font-size:12px; }

    /* Cards + grids */
    .grid{ display:grid; gap:var(--gap); }
    .card{ background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:14px; }
    .card h3{ margin:0 0 10px; color:var(--navy); font-size:14px; letter-spacing:.2px; }

    /* Notice component */
    .notice{
      display:flex; align-items:start; gap:12px; padding:12px;
      border-radius:16px; border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(92,184,92,.10), transparent);
      margin-top:10px;
    }
    .notice .icon{
      width:34px; height:34px; border-radius:12px; display:grid; place-items:center;
      font-weight:900; color:#fff; flex:0 0 auto;
    }
    .notice.info { background: linear-gradient(180deg, rgba(91,192,222,.10), transparent); }
    .notice.warn { background: linear-gradient(180deg, rgba(240,173,78,.14), transparent); }
    .notice.danger { background: linear-gradient(180deg, rgba(217,83,79,.10), transparent); }
    .notice.success { background: linear-gradient(180deg, rgba(92,184,92,.12), transparent); }
    .notice.info .icon{ background: var(--aqua); }
    .notice.warn .icon{ background: var(--amber); }
    .notice.danger .icon{ background: var(--red); }
    .notice.success .icon{ background: var(--green); }
    .notice h4{ margin:0; font-size:14px; color:var(--navy); }
    .notice p{ margin:6px 0 0; color:var(--muted); font-size:12px; }
    .notice .actions{ margin-left:auto; display:flex; gap:8px; }
    .xbtn{ padding:8px 10px; border-radius:12px; border:1px solid var(--border); background:var(--surface); cursor:pointer; font-weight:900; color:var(--muted); }
    .xbtn:focus{ outline:none; box-shadow:var(--ring); }

    /* Filters */
    .filters-bar{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .seg{ display:flex; background:var(--surface); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
    .seg button{ padding:8px 12px; border:0; background:transparent; cursor:pointer; font-weight:800; color:var(--navy); }
    .seg button.active{ background: rgba(51,122,183,.12); color:var(--blue-dark); }

    .list{ display:grid; gap:12px; }
    .list-item{
      display:flex; gap:12px; padding:12px; border:1px solid var(--border); border-radius:12px;
      background: linear-gradient(180deg, var(--surface-2), var(--surface));
      align-items:flex-start;
    }
    .list-item .type{ width:12px; height:12px; border-radius:50%; margin-top:4px; flex:0 0 auto; }
    .type.error{ background: var(--red); }
    .type.warn{ background: var(--amber); }
    .type.info{ background: var(--aqua); }
    .type.success{ background: var(--green); }
    .meta{ color:var(--muted); font-size:12px; }
    .item-actions{ margin-left:auto; display:flex; gap:8px; }

    .empty{ border:1px dashed var(--border); border-radius:12px; padding:16px; text-align:center; color:var(--muted); }

    .hide{ display:none !important; }

    /* Split */
    .split{ display:grid; gap:var(--gap); grid-template-columns: 1.2fr .8fr; align-items:start; margin-top:16px; }
    @media (max-width:980px){ .split{ grid-template-columns:1fr; } }

    /* Footer */
    footer{ margin-top:16px; color:var(--muted); font-size:12px; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; padding:10px 4px 0; }
    .footer-links{ display:flex; gap:12px; flex-wrap:wrap; }

    /* Mobile sidebar drawer */
    @media (max-width:980px){
      .app{ grid-template-columns:1fr; grid-template-areas: "nav" "main"; }
      .hamburger{ display:inline-flex; align-items:center; gap:8px; }
      .sidebar{
        position:fixed; top:var(--navbar-h); left:0; width:min(var(--sidebar-w), 88vw);
        height:calc(100vh - var(--navbar-h)); transform: translateX(-110%); transition: transform .18s ease;
        z-index:80; box-shadow: var(--shadow-2);
      }
      body.sidebar-open .sidebar{ transform: translateX(0); }
      .backdrop{
        position:fixed; inset: var(--navbar-h) 0 0 0; background: rgba(17,17,17,.35);
        opacity:0; pointer-events:none; transition: opacity .18s ease; z-index:70;
      }
      body.sidebar-open .backdrop{ opacity:1; pointer-events:auto; }
      .main{ padding:14px; }
    }
     .menu {
      width: 100%;
      font-family: var(--font);
    }

    /* Make the details container invisible (no card/shadow) */
    .menu-group {
      border: 0;
      border-radius: 0;
      background: transparent;
      box-shadow: none;
      padding: 0;
      margin: 0;
    }

    /* Summary styled exactly like .nav a */
    .menu-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-radius: 14px; /* same as .nav a */
      border: 1px solid transparent;
      background: linear-gradient(180deg, var(--surface-2), var(--surface));
      color: var(--navy);
      font-weight: 800;
      cursor: pointer;
      list-style: none;
    }
    .menu-label:hover {
      border-color: rgba(51,122,183,.25);
      text-decoration: none;
    }

    /* Focus ring same as your summary/buttons */
    .menu-group > summary:focus {
      outline: none;
      box-shadow: var(--ring);
    }
    .menu-group > summary::-webkit-details-marker { display: none; }

    .menu-group[open] .chevron {
      transform: rotate(180deg);
      background: rgba(51,122,183,.16);
    }

    /* Submenu is just a small indented list (no card) */
    .submenu {
      list-style: none;
      margin: 8px 0 0 0;   /* space under summary */
      padding: 0;
    }

    /* Each submenu link styled like .nav a, slightly indented */
    .submenu li { margin: 6px 0; }

    .submenu a {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid transparent;
      background: linear-gradient(180deg, var(--surface-2), var(--surface));
      color: var(--navy);
      font-weight: 800;
      text-decoration: none;
      margin-left: 12px; /* visual indent under Stock Management */
    }
    .submenu a:hover {
      border-color: rgba(51,122,183,.25);
      text-decoration: none;
    }

    /* Optional small accent dot before text */
    .submenu-text::before {
      content: "";
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--blue-wash);
      border: 1px solid rgba(51,122,183,.18);
      margin-right: 10px;
      vertical-align: middle;
    }

    /* Reuse your existing badge look for right side */
    .submenu a .badge {
      font-size: 12px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(51,122,183,.12);
      color: var(--blue-dark);
      border: 1px solid rgba(51,122,183,.18);
      font-weight: 900;
      white-space: nowrap;
    }

    /* Dark mode alignment */
    @media (prefers-color-scheme: dark) {
      .menu-label {
        color: var(--text);
      }
      .submenu a {
        color: var(--text);
      }
    }
  </style>
</head>

<body>
  

  <div class="app">
    <!-- NAVBAR -->
    <header class="navbar" role="banner">
      <div class="nav-left">
        <button class="hamburger" id="btn-open-sidebar" aria-controls="sidebar" aria-expanded="false">☰ Menu</button>

        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div class="brand-title">
            <strong>MediSync</strong>
          </div>
        </div>

        
      </div>

     
<div class="nav-right">
  <span class="pill">
    <span class="dot" aria-hidden="true"></span> Online
  </span>
  
  <details class="menu" id="accountMenu">
    <summary>Account ▾</summary>
    <nav class="dropdown" aria-label="Account options">
     <a href="../Common Features/login.html" id="logoutLink">Logout</a>
    </nav>
  </details>
</div>

    </header>

    <!-- SIDEBAR -->
     <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar" aria-label="Sidebar">
      <div class="side-card">
       
        <nav class="nav" aria-label="Primary">
          <!-- Dashboard is the one true route -->
        <a href="Headoffice_Dashboard.html">
            Dashboard <span class="badge" aria-hidden="true"></span>
          </a>
        <a href= "UserManagement.html">User Management<span class="badge">›</span></a>
          <a href="branchreg.html">
            Branch Registration<span class="badge">›</span>
          </a>

          <!-- Menus -->
          <nav class="menu">
            <details class="menu-group">
              <summary class="menu-label">
                <span>Vendor Procurement</span>
                <span class="badge">›</span>
              </summary>
              <ul class="submenu">
                <li>
                  <a href="viewbids.html">
                    <span class="submenu-text">View Bids</span>
                    <span class="badge">›</span>
                  </a>
                </li>
                <li>
                 <a href=" blacklist.html">
                    <span class="submenu-text">Vendor Blacklist</span>
                    <span class="badge">›</span>
                  </a>
                </li>
                <li>
                  <a href="../StoreManager/delivery-status.html">
                    <span class="submenu-text">Order Status</span>
                    <span class="badge">›</span>
                  </a>
                </li>
              </ul>
            </details>

            <nav class="menu">
              <details class="menu-group">
                <summary class="menu-label">
                  <span>Stock Management</span>
                  <span class="badge">›</span>
                </summary>
                <ul class="submenu">
                  <li>
                    <a href="Inventory_view.html">
                      <span class="submenu-text">Inventory View</span>
                      <span class="badge">›</span>
                    </a>
                  </li>
                  <li>
                   <a href="notification.html">
                      <span class="submenu-text">Notification</span>
                      <span class="badge">›</span>
                    </a>
                  </li>
                  <li>
                     <a href="stockreport.html">
                      <span class="submenu-text">Stock Report</span>
                      <span class="badge">›</span>
                    </a>
                  </li>
                </ul>
              </details>
            </nav>
          </nav>
        </nav>
      </div>
    </aside>

    <!-- Mobile backdrop -->
    <div class="backdrop" id="backdrop" aria-hidden="true"></div>

    <!-- MAIN -->
    <main class="main" id="main" role="main">
      <div class="page-title">
        <div>
          <h2>Notifications</h2>
         
        </div>
      </div>

      <div class="split">
        <!-- LEFT: Notifications list -->
        <div class="grid">
          <section class="card" aria-labelledby="filters-title">
            <h3 id="filters-title">Filters & Actions</h3>
            <div class="filters-bar" role="group" aria-label="Filter notifications">
              <div class="seg" role="tablist" aria-label="Type filters">
                <button type="button" class="active" data-filter="all" aria-selected="true" role="tab">All</button>
                <button type="button" data-filter="error" role="tab">Errors</button>
                <button type="button" data-filter="warn" role="tab">Warnings</button>
                <button type="button" data-filter="info" role="tab">Info</button>
                <button type="button" data-filter="success" role="tab">Success</button>
              </div>
             
              
            </div>
          </section>

          <section class="card" aria-labelledby="list-title">
            <h3 id="list-title">Recent Notifications</h3>
            <div id="notifications-empty" class="empty hide" role="status" aria-live="polite">
              No notifications to show.
            </div>
            <div id="notifications-list" class="list" role="feed" aria-busy="false" aria-live="polite"></div>
          </section>
        </div>

        <!-- RIGHT: Details & System messages -->
        <div class="grid">
          <section class="card" aria-labelledby="details-title">
            <h3 id="details-title">Selected Notification</h3>
            <div id="details-empty" class="empty">Select a notification to view details.</div>
            <div id="details" class="hide">
              <div class="notice info">
                <div class="icon">i</div>
                <div>
                  <h4 id="details-title-text">—</h4>
                  <p id="details-body-text">—</p>
                  <p class="meta">
                    <span id="details-meta">—</span>
                  </p>
                </div>
                <div class="actions">
                  <button class="xbtn" id="btn-delete">Delete</button>
                </div>
              </div>
            </div>
          </section>

          <section class="card" aria-labelledby="sys-msg-title">
            <h3 id="sys-msg-title">Messages</h3>

            <!-- Errors -->
            <div class="notice danger hide" id="error-box" role="alert" aria-live="assertive">
              <div class="icon">!</div>
              <div>
                <h4>Errors</h4>
                <ul id="error-list"></ul>
              </div>
              <div class="actions">
                <button class="xbtn" type="button" id="dismiss-error">Dismiss</button>
              </div>
            </div>

            <!-- Info -->
            <div class="notice warn hide" id="info-box" aria-live="polite">
              <div class="icon">i</div>
              <div>
                <h4>Info</h4>
                <ul id="info-list"></ul>
              </div>
              <div class="actions">
                <button class="xbtn" type="button" id="dismiss-info">Dismiss</button>
              </div>
            </div>
          </section>
        </div>
      </div>

      <footer>
        <span>© <span id="footer-year"></span> Head Office Manager</span>
        
      </footer>
    </main>
  </div>

  <!-- =========================
       Minimal JS
       ========================= -->
  <script>
    // Sidebar drawer
    const bodyEl = document.body;
    const btnMenu = document.getElementById('btn-open-sidebar');
    const backdrop = document.getElementById('backdrop');
    const footerYear = document.getElementById('footer-year');

    function closeSidebar(){ bodyEl.classList.remove('sidebar-open'); btnMenu?.setAttribute('aria-expanded','false'); }
    function openSidebar(){ bodyEl.classList.add('sidebar-open'); btnMenu?.setAttribute('aria-expanded','true'); }
    btnMenu?.addEventListener('click', () =>
      bodyEl.classList.contains('sidebar-open') ? closeSidebar() : openSidebar()
    );
    backdrop?.addEventListener('click', closeSidebar);
    document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeSidebar(); });
    footerYear.textContent = new Date().getFullYear();

    // Back button
    document.getElementById('btn-back')?.addEventListener('click', () => {
      if (history.length > 1) history.back(); else location.href = 'stock-management-dashboard.html';
    });

    // System message helpers
    const errorBox = document.getElementById('error-box');
    const infoBox = document.getElementById('info-box');
    const errorList = document.getElementById('error-list');
    const infoList = document.getElementById('info-list');

    function showError(msg){
      errorBox.classList.remove('hide');
      const li = document.createElement('li'); li.textContent = msg;
      errorList.appendChild(li);
    }
    function showInfo(msg){
      infoBox.classList.remove('hide');
      const li = document.createElement('li'); li.textContent = msg;
      infoList.appendChild(li);
    }
    function clearMessages(){
      errorBox.classList.add('hide'); errorList.innerHTML = '';
      infoBox.classList.add('hide'); infoList.innerHTML = '';
    }
    document.getElementById('dismiss-info')?.addEventListener('click', () => { infoBox.classList.add('hide'); infoList.innerHTML = ''; });
    document.getElementById('dismiss-error')?.addEventListener('click', () => { errorBox.classList.add('hide'); errorList.innerHTML = ''; });

    // ===== Demo Notifications Data (replace with backend) =====
    let notifications = [
      {
        id: 'N-001',
        type: 'error', // error | warn | info | success
        title: 'Batch BATCH-A1 expired in Warehouse 3',
        body: 'Amoxicillin 500mg · BATCH-A1 reached expiry on 2025-12-20. Remove from sale and initiate return.',
        unread: true,
        time: '2025-12-29 09:40',
        source: 'Stock Monitor',
        related: { sku: 'MED-001', batch: 'BATCH-A1', location: 'WH-3' }
      },
      {
        id: 'N-002',
        type: 'warn',
        title: 'Near-expiry: Paracetamol 650mg',
        body: 'BATCH-P7 will expire on 2026-02-05. Consider transfer to high-demand branches.',
        unread: true,
        time: '2025-12-30 14:12',
        source: 'Near-Expiry Scanner',
        related: { sku: 'MED-002', batch: 'BATCH-P7', location: 'Main' }
      },
      {
        id: 'N-003',
        type: 'info',
        title: 'Dispatch delayed due to weather',
        body: 'Shipment #DSP-1047 is delayed by ~24 hours due to regional weather alerts.',
        unread: false,
        time: '2025-12-28 16:55',
        source: 'Dispatch Service',
        related: { dispatchId: 'DSP-1047' }
      },
      {
        id: 'N-004',
        type: 'success',
        title: 'Transfer completed',
        body: 'Stock transfer #TRF-3012 to Branch-Kollam completed successfully.',
        unread: false,
        time: '2025-12-27 11:22',
        source: 'Transfer Engine',
        related: { transferId: 'TRF-3012' }
      },
      {
        id: 'N-005',
        type: 'warn',
        title: 'Low stock: Vitamin D3 60k',
        body: 'Current on-hand: 28 tabs. Reorder point: 50 tabs. Suggested vendor: Sunrise Pharma.',
        unread: true,
        time: '2025-12-31 08:05',
        source: 'Reorder Bot',
        related: { sku: 'MED-090' }
      }
    ];

    // Summary Elements
    const summaryTotal = document.getElementById('summary-total');
    const summaryUnread = document.getElementById('summary-unread');
    const summaryLastUpdated = document.getElementById('summary-last-updated');

    // List Elements
    const listEl = document.getElementById('notifications-list');
    const emptyEl = document.getElementById('notifications-empty');

    // Details Elements
    const detailsContainer = document.getElementById('details');
    const detailsEmpty = document.getElementById('details-empty');
    const detailsTitle = document.getElementById('details-title-text');
    const detailsBody = document.getElementById('details-body-text');
    const detailsMeta = document.getElementById('details-meta');
    const btnMarkRead = document.getElementById('btn-mark-read');
    const btnDelete = document.getElementById('btn-delete');

    // Filters state
    let filterType = 'all';
    let filterRead = 'any'; // any | read | unread
    let selectedId = null;

    function formatMeta(n){
      const parts = [
        `ID: ${n.id}`,
        `Type: ${n.type.toUpperCase()}`,
        `Source: ${n.source}`,
        `Time: ${n.time}`
      ];
      return parts.join(' · ');
    }

    function updateSummary(){
      summaryTotal.textContent = notifications.length;
      summaryUnread.textContent = notifications.filter(n => n.unread).length;
      summaryLastUpdated.textContent = new Date().toLocaleString();
    }

    function applyFilters(data){
      return data.filter(n => {
        const typeOk = (filterType === 'all') || (n.type === filterType);
        const readOk = (filterRead === 'any') || (filterRead === 'unread' ? n.unread : !n.unread);
        return typeOk && readOk;
      });
    }

    function renderList(){
      listEl.setAttribute('aria-busy', 'true');
      listEl.innerHTML = '';

      const data = applyFilters(notifications);

      emptyEl.classList.toggle('hide', data.length > 0);

      data.forEach(n => {
        const item = document.createElement('article');
        item.className = 'list-item';
        item.setAttribute('role', 'article');
        item.setAttribute('aria-label', `${n.type} notification: ${n.title}`);

        const dot = document.createElement('div');
        dot.className = `type ${n.type}`;

        const body = document.createElement('div');
        const title = document.createElement('strong');
        title.textContent = n.title;
        const desc = document.createElement('p');
        desc.className = 'hint';
        desc.textContent = n.body;

       
const meta = document.createElement('div');
meta.className = 'meta';
meta.textContent = formatMeta(n); // no read/unread in UI


        body.appendChild(title);
        body.appendChild(desc);
        body.appendChild(meta);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        const btnSelect = document.createElement('button');
        btnSelect.className = 'xbtn';
        btnSelect.textContent = 'Open';
        btnSelect.addEventListener('click', () => openDetails(n.id));

        const btnToggleRead = document.createElement('button');
        btnToggleRead.className = 'xbtn';
       
        const btnRemove = document.createElement('button');
        btnRemove.className = 'xbtn';
        btnRemove.textContent = 'Delete';
        btnRemove.addEventListener('click', () => removeNotification(n.id));

        actions.appendChild(btnSelect);
        
        actions.appendChild(btnRemove);

        item.appendChild(dot);
        item.appendChild(body);
        item.appendChild(actions);
        listEl.appendChild(item);
      });

      listEl.setAttribute('aria-busy', 'false');
      updateSummary();
    }

    function openDetails(id){
      selectedId = id;
      const n = notifications.find(x => x.id === id);
      if (!n) { detailsContainer.classList.add('hide'); detailsEmpty.classList.remove('hide'); return; }

      detailsTitle.textContent = n.title;
      detailsBody.textContent = n.body;
      detailsMeta.textContent = formatMeta(n);

      detailsEmpty.classList.add('hide');
      detailsContainer.classList.remove('hide');

      // Mark read when opened
      if (n.unread){ n.unread = false; renderList(); }
    }

    function toggleRead(id){
      const idx = notifications.findIndex(x => x.id === id);
      if (idx < 0) return;
      notifications[idx].unread = !notifications[idx].unread;
      renderList();
    }

    function removeNotification(id){
      notifications = notifications.filter(x => x.id !== id);
      if (selectedId === id){
        selectedId = null;
        detailsContainer.classList.add('hide');
        detailsEmpty.classList.remove('hide');
      }
      renderList();
      showInfo('Notification deleted.');
    }

    // Filter wiring
    document.querySelectorAll('[data-filter]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filterType = btn.getAttribute('data-filter');
        renderList();
      });
    });
    document.querySelectorAll('[data-read]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-read]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filterRead = btn.getAttribute('data-read');
        renderList();
      });
    });

    // Bulk actions
    document.getElementById('btn-mark-all-read')?.addEventListener('click', () => {
      notifications.forEach(n => n.unread = false);
      renderList();
      showInfo('All notifications marked as read.');
    });

    document.getElementById('btn-clear-all')?.addEventListener('click', () => {
      notifications = [];
      renderList();
      showInfo('All notifications cleared.');
    });

    document.getElementById('btn-archive-read')?.addEventListener('click', () => {
      const before = notifications.length;
      notifications = notifications.filter(n => n.unread);
      renderList();
      showInfo(`Archived ${before - notifications.length} read notifications.`);
    });

    // Details actions
    btnMarkRead?.addEventListener('click', () => {
      if (!selectedId) return;
      const n = notifications.find(x => x.id === selectedId);
      if (n){ n.unread = false; renderList(); showInfo('Marked as read.'); }
    });

    btnDelete?.addEventListener('click', () => {
      if (!selectedId) return;
      removeNotification(selectedId);
    });

    // Demo generator
    const DEMO_TYPES = ['error','warn','info','success'];
    document.getElementById('btn-refresh-demo')?.addEventListener('click', () => {
      const t = DEMO_TYPES[Math.floor(Math.random()*DEMO_TYPES.length)];
      const stamp = new Date().toISOString().slice(0,16).replace('T',' ');
      const id = 'N-' + String(Math.floor(1000 + Math.random()*9000));
      const payload = {
        id, type: t, title: `[${t.toUpperCase()}] Demo notification ${id}`,
        body: 'This is a sample notification generated for testing the UI flows.',
        unread: true, time: stamp, source: 'Demo Engine', related: {}
      };
      notifications.unshift(payload);
      renderList();
      showInfo(`New ${t} notification added (${id}).`);
    });

    // Initialize
    renderList();

    // Messaging dismissal
    document.getElementById('dismiss-info')?.addEventListener('click', () => { infoBox.classList.add('hide'); infoList.innerHTML = ''; });
    document.getElementById('dismiss-error')?.addEventListener('click', () => { errorBox.classList.add('hide'); errorList.innerHTML = ''; });
   (function(){
      const logoutLink = document.getElementById('logoutLink');  // the <a id="logoutLink">
      const accountMenu = document.getElementById('accountMenu'); // <details> (optional)

      if(!logoutLink) return;

      logoutLink.addEventListener('click', (e) => {
        e.preventDefault(); // stop instant navigation

        const ok = confirm('Are you sure you want to logout?');
        if(ok){
          // close the dropdown (nice UX)
          if(accountMenu) accountMenu.removeAttribute('open');

          // redirect to login page (from href)
          window.location.href = logoutLink.getAttribute('href') || '../Common Features/login.html';
        }
      });
    })();
    </script>
</body>
</html>
