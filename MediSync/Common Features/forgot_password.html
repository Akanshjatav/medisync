<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MediSync – Forgot Password</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
        
    /* =========================================
      MediSync – Forgot Password (Pharmacy Theme)
      Internal CSS
      ========================================= */

    /* ---------- Theme Variables ---------- */
    :root {
      --forest-deep: #102716;
      --sage-green: #4A644D;
      --warm-amber: #DE6D20;
      --near-black: #111111;
      --medium-gray: #515151;
      --light-gray: #E5E5E5;
      --white: #FFFFFF;
      --very-light-green: #f5fbf7;
      --logo-blue: #337AB7;
      --logo-green: #5CB85C;

      --forest-tint: #2A3F2C;
      --sage-shade: #3B513E;
      --amber-tint: #F4A64A;
      --amber-shade: #B85A18;
      --balanced-gray: #A0A0A0;
      --off-white: #FAFAF8;
      --green-wash: #e8f7ee;

      --burgundy: #6B1F1F;
      --navy-blue: #1F3A4D;

      --text: var(--near-black);
      --muted-text: var(--medium-gray);
      --border: var(--light-gray);

      --shadow-sm: 0 1px 2px rgba(31,58,77,0.10);
      --shadow-md: 0 4px 14px rgba(31,58,77,0.14);

      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;

      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;

      --max-content: 720px; /* focused form width */
    }

    /* ---------- Base ---------- */
    *,
    *::before,
    *::after { box-sizing: border-box; }
    html { -webkit-text-size-adjust: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color: var(--text);
      background: linear-gradient(180deg, var(--off-white), var(--very-light-green));
      line-height: 1.5;
    }
    a { color: var(--logo-blue); text-decoration: none; }
    a:hover { text-decoration: underline; }
    h1,h2,h3 { margin: 0 0 var(--space-3); font-weight: 600; }
    ul { margin: 0; padding: 0; list-style: none; }

    /* Screen-reader only */
    .sr-only {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0 0 0 0);
      border: 0;
    }

    /* Focus visibility */
    :focus-visible { outline: 3px solid var(--amber-tint); outline-offset: 3px; }

    /* ---------- App Shell ---------- */
    .app {
      min-height: 100vh;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    /* Header (consistent with dashboard) */
    .app-header {
      background:
        radial-gradient(1200px 300px at 0% 0%, rgba(218, 247, 227, 0.15), transparent 60%),
        linear-gradient(90deg, var(--navy-blue), var(--forest-tint));
      color: var(--white);
      box-shadow: var(--shadow-md);
    }
    .brand {
      display: flex; align-items: baseline; gap: var(--space-3);
      padding: var(--space-6) var(--space-8);
    }
    .brand__title { font-size: 1.6rem; letter-spacing: .4px; }
    .brand__subtitle { color: #CFE5F6; font-size: .95rem; }

    /* ---------- Layout ---------- */
    .layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-8);
      padding: var(--space-8);
      max-width: var(--max-content);
      margin: 0 auto;
    }
    .content { display: grid; gap: var(--space-8); align-content: start; }

    /* ---------- Panel ---------- */
    .panel {
      background: var(--white);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: var(--space-6);
    }
    .panel__title {
      color: var(--navy-blue);
      font-size: 1.25rem;
      margin-bottom: var(--space-2);
      position: relative;
      padding-left: 12px;
    }
    .panel__title::before {
      content: "";
      position: absolute;
      width: 6px; height: 22px;
      background: linear-gradient(180deg, var(--logo-blue), var(--logo-green));
      border-radius: 4px; left: 0; top: 2px;
    }
    .panel__description { color: var(--muted-text); margin-bottom: var(--space-6); }
    .panel__list { display: grid; gap: var(--space-3); }

    /* ---------- Form fields ---------- */
    .form-field {
      display: grid;
      gap: var(--space-2);
      margin-bottom: var(--space-5);
    }
    .form-field__label {
      color: var(--near-black);
      font-weight: 600;
    }
    .form-field__input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #dfe5ea;
      border-radius: var(--radius-sm);
      background: #fafcff;
      color: var(--near-black);
      box-shadow: inset 0 1px 2px rgba(31,58,77,0.06);
      transition: border-color 140ms ease, box-shadow 140ms ease, background 140ms ease;
    }
    .form-field__input::placeholder { color: var(--balanced-gray); }
    .form-field__input:focus {
      border-color: var(--logo-blue);
      box-shadow: 0 0 0 3px rgba(51,122,183,0.18);
      background: #fff;
    }

    /* Captcha row */
    .panel__header {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      margin: var(--space-3) 0 var(--space-4);
    }
    .captcha {
      display: inline-block;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-weight: 700;
      letter-spacing: 2px;
      padding: 10px 12px;
      border-radius: var(--radius-sm);
      color: var(--near-black);
      background:
        repeating-linear-gradient(135deg, #f5fbf7 0 10px, #ecf5ff 10px 20px);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
    }

    /* ---------- Buttons ---------- */
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: 8px;
      font-weight: 600; border-radius: 999px; cursor: pointer;
      border: 1px solid transparent;
      transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease, color 120ms ease;
      padding: 10px 16px;
    }
    .btn--primary {
      background: linear-gradient(180deg, var(--logo-blue), #2b6ca3);
      color: var(--white); border-color: #2b6ca3;
    }
    .btn--primary:hover {
      background: linear-gradient(180deg, #3a86c8, var(--logo-blue));
      box-shadow: var(--shadow-md); transform: translateY(-1px);
    }
    .btn--primary:active { transform: translateY(0); }

    .btn--secondary {
      background: var(--burgundy); color: var(--white); border-color: #5b1919;
    }
    .btn--secondary:hover {
      background: #5b1919; box-shadow: var(--shadow-md); transform: translateY(-1px);
    }
    .btn--secondary:active { transform: translateY(0); }

    /* Actions row */
    .form-actions {
      display: flex; flex-wrap: wrap; gap: var(--space-3);
      align-items: center; margin-top: var(--space-4);
    }

    /* ---------- Alerts ---------- */
    .alert {
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: var(--space-5);
      margin-top: var(--space-6);
      display: grid; gap: var(--space-2);
      min-height: 48px;
    }
    .alert--success {
      background: #EBFAF0; border-color: #CFEBD7; color: var(--forest-deep);
    }
    .alert--error {
      background: #FDECEA; border-color: #F5C5C4; color: var(--burgundy);
    }

    /* ---------- Footer ---------- */
    .page-footer {
      border-top: 1px solid var(--border);
      background: var(--off-white);
      color: var(--muted-text);
      padding: var(--space-6) var(--space-8);
    }
    .page-footer__links a { color: var(--logo-blue); }
    .page-footer__meta { margin-top: var(--space-3); font-size: .95rem; }

    /* ---------- Responsive ---------- */
    @media (max-width: 768px) {
      .layout { padding: var(--space-6); }
      .btn { width: 100%; } /* easier taps on mobile */
    }

    /* ---------- Print ---------- */
    @media print {
      .app-header, .page-footer { display: none; }
      .layout { padding: 0; }
      .panel { box-shadow: none; border-color: #ccc; }
      .btn { display: none; }
    }
  </style>
</head>
<body>

<div class="app" role="application" aria-label="Forgot Password">
  <!-- Header -->
  <header class="app-header">
    <div class="brand">
      <h1 class="brand__title">MediSync</h1>
      <p class="brand__subtitle">Forgot Password</p>
    </div>
  </header>

  <!-- Main Layout -->
  <div class="layout">
    <main class="content">
      <section class="panel forgot-password">
        <h2 class="panel__title">Verify your identity</h2>
        <p class="panel__description">
          Enter your email to receive an OTP, then verify using the OTP and captcha.
        </p>

        <!-- Form (HTML-only) -->
        <form>
          <!-- Email -->
          <div class="form-field">
            <label for="fpEmail" class="form-field__label">Email: </label>
            <input
              type="email"
              id="fpEmail"
              name="email"
              class="form-field__input"
              required
              placeholder="you@example.com"
              autocomplete="email"
            />
            <p class="form-field__help">We’ll send an OTP to this email.</p>
          </div>

          <!-- Actions -->
          <div class="form-actions">
            <button type="button" id="sendOtpBtn" class="btn btn--primary">Send OTP</button>
            <button type="button" id="cancelBtn" class="btn btn--secondary">Cancel</button>
          </div>

          <!-- Optional error placeholder (kept; hidden by default, used by JS) -->
          <div id="errorBox" class="alert alert--error" role="alert" aria-live="polite" style="display:none;"></div>

        </form>
      </section>
    </main>
  </div>
</div>


    <hr>

    <!-- Footer -->
    <footer class="page-footer">
      <nav class="page-footer__links" aria-label="Legal">
        <a href="#">Privacy</a> •
        <a href="#">Terms</a> •
        <a href="#">Help Center</a>
      </nav>
      <p class="page-footer__meta">
        © 2025 MediSync · Contact:
        xxxxxxxxxx</a> /
        mailto:<a href="#">somethingmail@mail.com</a>
      </p>
    </footer>
  </div>





<!-- <script>
  /**
   * MediSync – Forgot Password Page Script
   * Adds OTP send/verify, captcha generation, validation, accessibility, and responsiveness.
   */
  (function () {
    "use strict";

    /* ===========================
      Utilities
      =========================== */
    const qs = (sel, root = document) => root.querySelector(sel);
    const qsa = (sel, root = document) => Array.from(root.querySelectorAll(sel));
    const on = (el, ev, handler, opts) => el && el.addEventListener(ev, handler, opts);
    const debounce = (fn, wait = 160) => { let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), wait); }; };

    const storageSafeGet = (key, fallback) => {
      try { const v = sessionStorage.getItem(key); return v ? JSON.parse(v) : fallback; } catch { return fallback; }
    };
    const storageSafeSet = (key, val) => { try { sessionStorage.setItem(key, JSON.stringify(val)); } catch {} };

    /* ===========================
      DOM references
      =========================== */
    const email = qs("#fpEmail");
    const otp = qs("#fpOtp");
    const captchaInput = qs("#fpCaptcha");
    const captchaCodeEl = qs(".captcha");
    const refreshBtn = qs(".panel__header .btn.btn--secondary");
    const verifyBtn = qsa(".form-actions .btn").find(b => /verify/i.test(b.textContent));
    const cancelBtn = qsa(".form-actions .btn").find(b => /cancel/i.test(b.textContent));
    const errorBox = qs(".alert.alert--error");
    const successBox = qs(".alert.alert--success");

    /* ===========================
      Inline helper styles (optional)
      =========================== */
    (function injectInlineStyles() {
      const style = document.createElement("style");
      style.textContent = `
        .alert[hidden] { display: none !important; }
        .loading {
          position: relative;
        }
        .loading::after {
          content: ""; position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
          width: 16px; height: 16px; border: 2px solid #cfe1f5; border-top-color: #337AB7; border-radius: 50%;
          animation: spin .8s linear infinite;
        }
        @keyframes spin { to { transform: translateY(-50%) rotate(360deg); } }
      `;
      document.head.appendChild(style);
    })();

    /* ===========================
      Messages
      =========================== */
    function showError(msgs) {
      if (!errorBox) return;
      if (!msgs || msgs.length === 0) {
        errorBox.hidden = true;
        errorBox.innerHTML = "";
        return;
      }
      errorBox.hidden = false;
      errorBox.innerHTML = "<ul>" + msgs.map(m => `<li>${m}</li>`).join("") + "</ul>";
      // announce
      errorBox.setAttribute("aria-live", "polite");
      // focus first invalid field later
      setTimeout(focusFirstInvalid, 50);
    }

    function showSuccess(msg) {
      if (!successBox) return;
      successBox.hidden = false;
      successBox.textContent = msg;
      successBox.setAttribute("aria-live", "polite");
    }

    function clearMessages() {
      showError([]);
      if (successBox) { successBox.hidden = true; successBox.textContent = ""; }
    }

    /* ===========================
      Captcha
      =========================== */
    const SAFE_CHARS = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789"; // avoid I, O, 0, 1
    function generateCaptcha(len = 6) {
      let s = "";
      for (let i = 0; i < len; i++) s += SAFE_CHARS[Math.floor(Math.random() * SAFE_CHARS.length)];
      return s;
    }
    function setCaptcha(code) {
      if (captchaCodeEl) {
        captchaCodeEl.textContent = code;
        captchaCodeEl.setAttribute("aria-label", `Captcha code ${code.split("").join(" ")}`);
      }
    }

    /* ===========================
      Validation
      =========================== */
    function validateEmail() {
      const val = (email?.value || "").trim();
      let msg = "";
      if (!val) msg = "Email is required.";
      else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val)) msg = "Enter a valid email address.";
      if (email) email.setAttribute("aria-invalid", String(Boolean(msg)));
      return msg;
    }

    function validateOtp(requireOtp) {
      const val = (otp?.value || "").trim();
      let msg = "";
      if (requireOtp) {
        if (!val) msg = "OTP is required.";
        else if (!/^\d{6}$/.test(val)) msg = "OTP must be a 6-digit number.";
      } else if (val && !/^\d{6}$/.test(val)) {
        msg = "OTP must be a 6-digit number.";
      }
      if (otp) otp.setAttribute("aria-invalid", String(Boolean(msg)));
      return msg;
    }

    function validateCaptcha(requireCaptcha) {
      const val = (captchaInput?.value || "").trim();
      const code = captchaCodeEl?.textContent || "";
      let msg = "";
      if (requireCaptcha) {
        if (!val) msg = "Captcha is required.";
        else if (val !== code) msg = "Captcha does not match.";
      } else if (val && val !== code) {
        msg = "Captcha does not match.";
      }
      if (captchaInput) captchaInput.setAttribute("aria-invalid", String(Boolean(msg)));
      return msg;
    }

    function focusFirstInvalid() {
      const firstInvalid = [email, otp, captchaInput].find(el => el && el.getAttribute("aria-invalid") === "true");
      firstInvalid && firstInvalid.focus();
    }

    /* ===========================
      Flow: Send OTP, then Verify
      =========================== */
    const STEP_KEY = "medisync_fp_step";
    const OTP_KEY  = "medisync_fp_code";
    const EMAIL_KEY = "medisync_fp_email";
    const EXPIRY_KEY = "medisync_fp_expiry"; // timestamp (ms) when OTP expires

    function setStep(step) { storageSafeSet(STEP_KEY, step); }
    function getStep()   { return storageSafeGet(STEP_KEY, "init"); }
    function setOtp(code, ttlMinutes = 5) {
      storageSafeSet(OTP_KEY, code);
      const expiry = Date.now() + ttlMinutes * 60_000;
      storageSafeSet(EXPIRY_KEY, expiry);
    }
    function getOtp() { return storageSafeGet(OTP_KEY, ""); }
    function isOtpExpired() {
      const expiry = storageSafeGet(EXPIRY_KEY, 0);
      return Date.now() > expiry;
    }

    function sendOtp() {
      clearMessages();
      const emailErr = validateEmail();
      if (emailErr) return showError([emailErr]);

      // Simulate send
      const code = String(Math.floor(100000 + Math.random() * 900000)); // 6-digit
      setOtp(code, 5);
      storageSafeSet(EMAIL_KEY, (email?.value || "").trim());
      showSuccess(`OTP sent to ${email.value.trim()}. Check your inbox. (Demo code: ${code})`);
      setStep("otp-sent");
      otp && otp.focus();
    }

    function verifyAll() {
      clearMessages();
      const msgs = [];
      const emailErr = validateEmail(); if (emailErr) msgs.push(emailErr);

      // Require OTP & captcha once we sent OTP
      const requireDetails = getStep() === "otp-sent";
      const otpErr = validateOtp(requireDetails); if (otpErr) msgs.push(otpErr);
      const capErr = validateCaptcha(requireDetails); if (capErr) msgs.push(capErr);

      if (msgs.length) return showError(msgs);

      // If we are still in init (no OTP sent), treat as "send OTP" step
      if (getStep() !== "otp-sent") return sendOtp();

      // At verify step:
      if (isOtpExpired()) return showError(["OTP expired. Please request a new one."]);
      const storedCode = getOtp();
      if ((otp?.value || "").trim() !== storedCode) return showError(["Invalid OTP."]);
      showSuccess("Verified! Redirecting to Reset Password…");
      // In a real app, backend verification happens here
      setTimeout(() => { window.location.href = "reset_password.html"; }, 800);
    }

    /* ===========================
      Buttons / Actions
      =========================== */
    function addLoading(el, on) {
      if (!el) return;
      el.classList.toggle("loading", !!on);
      el.disabled = !!on;
    }

    function initButtons() {
      // Verify & Continue
      on(verifyBtn, "click", (e) => {
        e.preventDefault();
        addLoading(verifyBtn, true);
        setTimeout(() => { verifyAll(); addLoading(verifyBtn, false); }, 250);
      });

      // Cancel
      on(cancelBtn, "click", (e) => {
        e.preventDefault();
        // Prefer history back; else go to sign-in
        if (history.length > 1) history.back();
        else location.href = "login.html";
      });

      // Refresh captcha
      on(refreshBtn, "click", (e) => {
        e.preventDefault();
        const code = generateCaptcha(6);
        setCaptcha(code);
        captchaInput && (captchaInput.value = "");
        captchaInput && captchaInput.focus();
        showSuccess("Captcha refreshed.");
      });
    }

    /* ===========================
      Live validation & shortcuts
      =========================== */
    function initLiveValidation() {
      on(email, "input", debounce(() => validateEmail()));
      on(otp, "input", debounce(() => validateOtp(false)));
      on(captchaInput, "input", debounce(() => validateCaptcha(false)));

      [email, otp, captchaInput].forEach((inp) => {
        on(inp, "keydown", (e) => {
          if (e.key === "Enter") { e.preventDefault(); verifyAll(); }
          if (e.key === "Escape") { inp.value = ""; inp.dispatchEvent(new Event("input", { bubbles: true })); }
          if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === "r" && refreshBtn) {
            e.preventDefault();
            refreshBtn.click();
          }
        });
      });
    }

    /* ===========================
      Responsive behavior
      =========================== */
    const mq = window.matchMedia("(max-width: 768px)");
    function applyResponsive(mql) {
      // Shorter aria labels on mobile
      email && email.setAttribute("aria-label", mql.matches ? "Email" : "Email address");
      otp && otp.setAttribute("aria-label", mql.matches ? "OTP" : "One-time password (6 digits)");
      captchaInput && captchaInput.setAttribute("aria-label", mql.matches ? "Captcha" : "Type the captcha");
    }

    /* ===========================
      Connectivity notice
      =========================== */
    function initConnectivityNotice() {
      const OFFLINE_MSG = "You appear to be offline. OTP/captcha may not work until connectivity is restored.";
      function updateBanner() {
        if (!navigator.onLine) showError([OFFLINE_MSG]); else showError([]);
      }
      updateBanner();
      on(window, "online", updateBanner);
      on(window, "offline", updateBanner);
    }

    /* ===========================
      Init
      =========================== */
    on(document, "DOMContentLoaded", () => {
      // Captcha
      const initialCode = generateCaptcha(6);
      setCaptcha(initialCode);

      // Prefill email from prior session (optional)
      const prevEmail = storageSafeGet(EMAIL_KEY, "");
      if (prevEmail && email) email.value = prevEmail;

      // Step init
      if (!storageSafeGet(STEP_KEY, "")) setStep("init");

      // Focus
      email && email.focus();

      // Ensure alerts start hidden
      if (errorBox) errorBox.hidden = true;
      if (successBox) successBox.hidden = true;

      // Wire up interactions
      initButtons();
      initLiveValidation();
      applyResponsive(mq);
      on(mq, "change", applyResponsive);
      initConnectivityNotice();
    });
  })();
</script> -->




<script>
/**
 * MediSync — Forgot Password (Email-only)
 * Keeps: event listeners, responsiveness, validation, inline errors, redirects.
 * Removes: OTP/captcha/storage/extra flow.
 */
(function () {
  "use strict";

  // ---------- Helpers ----------
  const qs  = (sel, root = document) => root.querySelector(sel);
  const qsa = (sel, root = document) => Array.from(root.querySelectorAll(sel));
  const on  = (el, ev, fn, opts) => el && el.addEventListener(ev, fn, opts);
  const debounce = (fn, wait = 160) => { let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), wait); }; };

  // Practical email validation (message will show: you@example.com)
  const isEmailValid = (v) => /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(v);

  on(document, "DOMContentLoaded", () => {
    const form  = qs("form");
    const email = qs("#fpEmail");

    // Buttons: use IDs if you add them, else locate by text inside .form-actions
    const sendBtn =
      qs("#sendOtpBtn") ||
      qsa(".form-actions button").find(b => /send\s*otp/i.test(b.textContent));

    const cancelBtn =
      qs("#cancelBtn") ||
      qsa(".form-actions button").find(b => /cancel/i.test(b.textContent));

    // Optional alert container already in your HTML (kept, but inline error is primary)
    const errorBox = qs(".alert.alert--error");

    if (!email || !sendBtn || !cancelBtn) {
      console.warn("Forgot Password: missing email or action buttons.", { email, sendBtn, cancelBtn });
      return;
    }

    // Prevent form submit reload (your buttons are type="submit" in current markup)
    on(form, "submit", (e) => e.preventDefault());

    // ---------- Inline error element (inserted under email input) ----------
    let inlineErr = qs("#fpEmailError");
    if (!inlineErr) {
      inlineErr = document.createElement("p");
      inlineErr.id = "fpEmailError";
      inlineErr.className = "form-field__help";     // uses your existing style
      inlineErr.style.color = "var(--burgundy)";    // matches your theme
      inlineErr.style.display = "none";
      inlineErr.setAttribute("role", "alert");
      inlineErr.setAttribute("aria-live", "polite");
      email.insertAdjacentElement("afterend", inlineErr);
    }

    // Accessibility: ensure email references the inline error (and keep existing describedby if any)
    const existingDesc = email.getAttribute("aria-describedby");
    const descIds = new Set((existingDesc || "").split(/\s+/).filter(Boolean));
    descIds.add(inlineErr.id);
    email.setAttribute("aria-describedby", Array.from(descIds).join(" "));

    // ---------- Error helpers ----------
    function showInlineError(msg) {
      inlineErr.textContent = msg;
      inlineErr.style.display = "block";
      email.setAttribute("aria-invalid", "true");

      // Keep the page-level alert box in sync (optional, but helpful)
      if (errorBox) {
        errorBox.hidden = false;
        errorBox.textContent = msg;
      }
    }

    function clearInlineError() {
      inlineErr.textContent = "";
      inlineErr.style.display = "none";
      email.setAttribute("aria-invalid", "false");

      if (errorBox) {
        errorBox.hidden = true;
        errorBox.textContent = "";
      }
    }

    // ---------- Validation ----------
    function validateEmail(showErrors = true) {
      const val = (email.value || "").trim();

      if (!val) {
        if (showErrors) showInlineError("Email is required (e.g., you@example.com).");
        return false;
      }

      if (!isEmailValid(val)) {
        if (showErrors) showInlineError("Enter a valid email address (e.g., you@example.com).");
        return false;
      }

      clearInlineError();
      return true;
    }

    // ---------- Responsiveness (media query) ----------
    const mq = window.matchMedia("(max-width: 768px)");
    function applyResponsive(mql) {
      email.setAttribute("aria-label", mql.matches ? "Email" : "Email address (you@example.com)");
    }
    applyResponsive(mq);
    on(mq, "change", (e) => applyResponsive(e));

    // ---------- Live validation (important UX) ----------
    on(email, "input", debounce(() => validateEmail(false)));
    on(email, "blur", () => validateEmail(true));

    // Optional: disable Send OTP until email looks valid (keeps things tight + “responsive”)
    function updateSendEnabled() {
      sendBtn.disabled = !isEmailValid((email.value || "").trim());
    }
    on(email, "input", debounce(updateSendEnabled));
    updateSendEnabled();

    // ---------- Click handlers ----------
    // NOTE: Your markup currently wraps buttons in <a>. This prevents default navigation and uses JS redirects.
    const sendAnchor = sendBtn.closest("a");
    const cancelAnchor = cancelBtn.closest("a");

    function goOtp(e) {
      e.preventDefault();
      if (!validateEmail(true)) return;     // inline error on empty/invalid
      window.location.href = "./otp.html";
    }

    function goLogin(e) {
      e.preventDefault();
      window.location.href = "./login.html";
    }

    on(sendBtn, "click", goOtp);
    on(sendAnchor, "click", goOtp);

    on(cancelBtn, "click", goLogin);
    on(cancelAnchor, "click", goLogin);

    // Enter key on email triggers Send OTP flow
    on(email, "keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        sendBtn.click();
      }
    });
  });
})();
</script>




<script>
  (function wireForgotMinimal() {
    // Update selectors if your IDs differ
    const emailEl   = document.getElementById("fpEmail");  // your email field id
    const sendBtn   = document.getElementById("sendOtpBtn");
    const cancelBtn = document.getElementById("cancelBtn");
    const errorBox  = document.getElementById("errorBox");

    if (!emailEl || !sendBtn || !cancelBtn) {
      console.warn("Missing elements:", { emailEl, sendBtn, cancelBtn });
      return;
    }

    // Simple email format check
    const isEmailValid = (v) => /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(v);

    const showError = (msg) => {
      if (errorBox) {
        errorBox.textContent = msg;
        errorBox.style.display = "block";
      } else {
        alert(msg);
      }
    };
    const clearError = () => {
      if (errorBox) {
        errorBox.textContent = "";
        errorBox.style.display = "none";
      }
    };

    // Responsiveness/UX: enable/disable Send OTP based on email validity
    const updateSendState = () => {
      const v = (emailEl.value || "").trim();
      sendBtn.disabled = !isEmailValid(v);
      clearError();
    };
    emailEl.addEventListener("input", updateSendState);
    updateSendState(); // initialize state

    // Send OTP → validate email format → redirect to OTP page
    sendBtn.addEventListener("click", function () {
      clearError();
      const val = (emailEl.value || "").trim();
      if (!val) {
        showError("Please enter your email.");
        return;
      }
      if (!isEmailValid(val)) {
        showError("Enter a valid email address.");
        return;
      }
      // Redirect
      
      document.getElementById("sendOtpBtn").addEventListener("click", function () {
        window.location.href = "./otp.html"; 
      });

    });

    // Cancel → go back to Login page
    cancelBtn.addEventListener("click", function () {
      clearError();
      
      document.getElementById("cancelBtn").addEventListener("click", function () {
        window.location.href = "./login.html"; 
      });

    });
  })();
</script>








 
</body>
</html>
